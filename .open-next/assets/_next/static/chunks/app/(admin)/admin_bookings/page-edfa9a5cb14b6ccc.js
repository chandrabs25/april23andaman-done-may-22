(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7697],{9707:function(e,t,s){Promise.resolve().then(s.bind(s,1877))},9763:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let s=(0,a.forwardRef)((s,n)=>{let{color:l="currentColor",size:c=24,strokeWidth:d=2,absoluteStrokeWidth:o,className:x="",children:m,...h}=s;return(0,a.createElement)("svg",{ref:n,...r,width:c,height:c,stroke:l,strokeWidth:o?24*Number(d)/Number(c):d,className:["lucide","lucide-".concat(i(e)),x].join(" "),...h},[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(m)?m:[m]])});return s.displayName="".concat(e),s}},44:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},505:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},7662:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]])},8226:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},4794:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},6381:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]])},5805:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},1877:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(7437),r=s(2265),i=s(4794),n=s(44);let l=(0,s(9763).Z)("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);var c=s(7662),d=s(6381),o=s(505),x=s(5805),m=s(8226);function h(){let[e,t]=(0,r.useState)("all"),[s,h]=(0,r.useState)([]),[y,g]=(0,r.useState)(!0),[u,p]=(0,r.useState)(null),[b,f]=(0,r.useState)({totalItems:0,currentPage:1,pageSize:50,totalPages:0}),N=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;g(!0),p(null);try{let s=await fetch("/api/admin/bookings?type=".concat(e,"&page=").concat(t,"&limit=50")),a=await s.json();if(!s.ok)throw Error(!1===a.success?"Failed to fetch bookings":"Unknown error");h(a.data.bookings),f(a.data.pagination)}catch(e){p(e instanceof Error?e.message:"Failed to fetch bookings"),h([])}finally{g(!1)}};(0,r.useEffect)(()=>{N(e)},[e]);let k=e=>{t(e),f(e=>({...e,currentPage:1}))},v=t=>{N(e,t)},j=e=>new Date(e).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}),w=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e),_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"booking",s={booking:{pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-green-100 text-green-800",completed:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800",PENDING_PAYMENT:"bg-orange-100 text-orange-800"},payment:{pending:"bg-yellow-100 text-yellow-800",INITIATED:"bg-blue-100 text-blue-800",SUCCESS:"bg-green-100 text-green-800",FAILED:"bg-red-100 text-red-800",paid:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"}}[t][e]||"bg-gray-100 text-gray-800";return(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(s),children:e})},P=e=>({all:(0,a.jsx)(i.Z,{className:"h-4 w-4"}),packages:(0,a.jsx)(i.Z,{className:"h-4 w-4"}),services:(0,a.jsx)(n.Z,{className:"h-4 w-4"}),hotels:(0,a.jsx)(n.Z,{className:"h-4 w-4"}),activities:(0,a.jsx)(l,{className:"h-4 w-4"}),rentals:(0,a.jsx)(c.Z,{className:"h-4 w-4"}),transport:(0,a.jsx)(d.Z,{className:"h-4 w-4"})})[e];return y&&0===s.length?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading bookings..."})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"All Bookings"}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Total: ",b.totalItems," bookings"]})]}),(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsx)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[{key:"all",label:"All Bookings"},{key:"packages",label:"Package Bookings"},{key:"services",label:"All Services"},{key:"hotels",label:"Hotels"},{key:"activities",label:"Activities"},{key:"rentals",label:"Rentals"},{key:"transport",label:"Transport"}].map(t=>(0,a.jsxs)("button",{onClick:()=>k(t.key),className:"".concat(e===t.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2"),children:[P(t.key),(0,a.jsx)("span",{children:t.label})]},t.key))})}),u&&(0,a.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-sm text-red-700",children:u})})})}),(0,a.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:0===s.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(i.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No bookings found"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"No bookings match the current filter criteria."})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Booking Details"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dates & Guests"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.package_name||e.service_name||"Booking #".concat(e.id)}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"package"===e.booking_type?(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(i.Z,{className:"h-3 w-3 mr-1"}),"Package - ",e.package_category_name]}):(0,a.jsxs)("span",{className:"flex items-center",children:[P(e.service_type),(0,a.jsxs)("span",{className:"ml-1",children:[e.service_type," ",e.room_type&&"- ".concat(e.room_type)]})]})}),e.provider_name&&(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["Provider: ",e.provider_name]})]})})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.customer_name||e.guest_name||"Guest"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.customer_email||e.guest_email||"No email"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.customer_phone||e.guest_phone||"No phone"})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-900",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:[j(e.start_date)," - ",j(e.end_date)]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-500",children:[(0,a.jsx)(x.Z,{className:"h-3 w-3 mr-1"}),e.total_people," guests",e.quantity&&e.quantity>1&&(0,a.jsxs)("span",{className:"ml-2",children:["\xd7 ",e.quantity]})]})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:w(e.total_amount)}),e.service_price&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Service: ",w(e.service_price)]})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"space-y-1",children:[_(e.status,"booking"),_(e.payment_status,"payment")]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j(e.created_at)})]},e.id))})]})})}),b.totalPages>1&&(0,a.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,a.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,a.jsx)("button",{onClick:()=>v(b.currentPage-1),disabled:b.currentPage<=1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),(0,a.jsx)("button",{onClick:()=>v(b.currentPage+1),disabled:b.currentPage>=b.totalPages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),(0,a.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing"," ",(0,a.jsx)("span",{className:"font-medium",children:(b.currentPage-1)*b.pageSize+1})," ","to"," ",(0,a.jsx)("span",{className:"font-medium",children:Math.min(b.currentPage*b.pageSize,b.totalItems)})," ","of"," ",(0,a.jsx)("span",{className:"font-medium",children:b.totalItems})," results"]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,a.jsx)("button",{onClick:()=>v(b.currentPage-1),disabled:b.currentPage<=1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),[...Array(Math.min(b.totalPages,5))].map((e,t)=>{let s=t+1;return(0,a.jsx)("button",{onClick:()=>v(s),className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium ".concat(s===b.currentPage?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"),children:s},s)}),(0,a.jsx)("button",{onClick:()=>v(b.currentPage+1),disabled:b.currentPage>=b.totalPages,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]})]})}}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=9707)}),_N_E=e.O()}]);