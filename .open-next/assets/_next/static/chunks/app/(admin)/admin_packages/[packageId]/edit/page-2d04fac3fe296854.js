(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8201],{152:function(e,a,t){Promise.resolve().then(t.bind(t,9184))},9763:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});var s=t(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,a)=>{let t=(0,s.forwardRef)((t,n)=>{let{color:o="currentColor",size:c=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:m="",children:u,...g}=t;return(0,s.createElement)("svg",{ref:n,...r,width:c,height:c,stroke:o,strokeWidth:d?24*Number(l)/Number(c):l,className:["lucide","lucide-".concat(i(e)),m].join(" "),...g},[...a.map(e=>{let[a,t]=e;return(0,s.createElement)(a,t)}),...Array.isArray(u)?u:[u]])});return t.displayName="".concat(e),t}},2660:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5863:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9554:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(9763).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},9397:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},2489:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7648:function(e,a,t){"use strict";t.d(a,{default:function(){return r.a}});var s=t(2972),r=t.n(s)},9376:function(e,a,t){"use strict";var s=t(5475);t.o(s,"useParams")&&t.d(a,{useParams:function(){return s.useParams}}),t.o(s,"usePathname")&&t.d(a,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(a,{useSearchParams:function(){return s.useSearchParams}})},9184:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return g}});var s=t(7437),r=t(2265),i=t(9376),n=t(5863),o=t(2660),c=t(9397),l=t(9554),d=t(7648),m=t(1079),u=t(3340);function g(){let e=(0,i.useRouter)(),a=(0,i.useParams)().packageId,[t,g]=(0,r.useState)({name:"",description:"",duration:"",base_price:0,max_people:2,itinerary:[""],included_services:"",images:[],cancellation_policy:"",is_active:!0,package_categories:[{category_name:"Standard",price:0,hotel_details:"",category_description:"",max_pax_included_in_price:2,images:[]}]}),[p,x]=(0,r.useState)(!1),[f,h]=(0,r.useState)(!0),[y,b]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!a){b("Package ID is missing."),h(!1);return}(async()=>{h(!0),b(null);try{let e=await fetch("/api/admin/packages/".concat(a));if(!e.ok){let a=await e.json();throw Error(a.message||"Error: ".concat(e.status))}let t=await e.json();if(t.success&&t.data){let e=t.data;if(console.log("Fetched packageData:",JSON.stringify(e,null,2)),!e.package){(0,u.Am)({variant:"destructive",title:"Error",description:"Package data is missing in API response."}),b("Package data is missing in API response."),h(!1);return}let a=e.package,s=[""];if(a.itinerary&&"string"==typeof a.itinerary)try{let e=JSON.parse(a.itinerary);"object"==typeof e&&null!==e&&(s=Object.values(e))}catch(e){console.error("Failed to parse itinerary JSON:",e),(0,u.Am)({variant:"destructive",title:"Data Error",description:"Could not parse itinerary data."})}else"object"==typeof a.itinerary&&null!==a.itinerary&&(s=Object.values(a.itinerary));let r=[];if("string"==typeof a.images)try{let e=JSON.parse(a.images);r=Array.isArray(e)?e:[]}catch(e){console.error("Failed to parse main package images JSON:",e),r=[],(0,u.Am)({variant:"destructive",title:"Data Error",description:"Could not parse main image data."})}else Array.isArray(a.images)&&(r=a.images);let i=(e.categories||[]).map(e=>{let a=[];if("string"==typeof e.images)try{let t=JSON.parse(e.images);a=Array.isArray(t)?t:[]}catch(t){console.error("Failed to parse category images JSON for category ID "+e.id+":",t),a=[],(0,u.Am)({variant:"destructive",title:"Data Error",description:"Could not parse images for category ".concat(e.category_name,".")})}else Array.isArray(e.images)&&(a=e.images);return{...e,id:e.id,images:a}});g({name:a.name||"",description:a.description||"",duration:a.duration||"",base_price:a.base_price||0,max_people:a.max_people||2,itinerary:s.length>0?s:[""],included_services:a.included_services||"",images:r,cancellation_policy:a.cancellation_policy||"",is_active:void 0===a.is_active||1===a.is_active||!0===a.is_active,package_categories:i.length>0?i:[{category_name:"Standard",price:0,hotel_details:"",category_description:"",max_pax_included_in_price:2,images:[]}]})}else throw Error(t.message||"Failed to fetch package details.")}catch(e){b(e instanceof Error?e.message:"An unknown error occurred while fetching details."),console.error("Failed to fetch package details:",e)}finally{h(!1)}})()},[a]);let v=e=>{let{name:a,value:t,type:s}=e.target;if("checkbox"===s){let t=e.target.checked;g(e=>({...e,[a]:t}))}else"number"===s?g(e=>({...e,[a]:parseFloat(t)||0})):g(e=>({...e,[a]:t}))},j=(e,a)=>{let s=[...t.itinerary];s[e]=a,g(e=>({...e,itinerary:s}))},N=e=>{if(1===t.itinerary.length)return;let a=t.itinerary.filter((a,t)=>t!==e);g(e=>({...e,itinerary:a}))},_=(e,a,s)=>{let r=[...t.package_categories];"price"===a||"max_pax_included_in_price"===a?r[e][a]="number"==typeof s?s:parseFloat(s)||0:"images"!==a&&(r[e][a]=s),g(e=>({...e,package_categories:r}))},k=(e,a)=>{let s=[...t.package_categories];s[e].images=a,g(e=>({...e,package_categories:s}))},w=e=>{if(1===t.package_categories.length)return;let a=t.package_categories.filter((a,t)=>t!==e);g(e=>({...e,package_categories:a}))},A=async e=>{if(g(a=>({...a,images:e})),!a){(0,u.Am)({variant:"destructive",title:"Error",description:"Package ID not found. Cannot update images."}),b("Package ID missing, cannot update images.");return}x(!0),b(null);try{let s=await fetch("/api/admin/packages/".concat(a),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({images:JSON.stringify(e),package_categories:t.package_categories.map(e=>({...e,id:e.id,images:JSON.stringify(e.images||[])}))})}),r=await s.json();if(s.ok&&r.success)(0,u.Am)({title:"Images Updated",description:"Package images have been successfully updated."});else throw Error(r.message||"Failed to update package with new images.")}catch(e){console.error("Update package images error:",e),b(e.message||"Failed to save new images to the package."),(0,u.Am)({variant:"destructive",title:"Image Update Error",description:e.message||"Failed to save new images. Please try again or contact support."})}finally{x(!1)}},S=async s=>{s.preventDefault(),x(!0),b(null);let r=t.itinerary.reduce((e,a,t)=>(e["day".concat(t+1)]=a,e),{}),i={...t,itinerary:r,images:JSON.stringify(t.images),package_categories:t.package_categories.map(e=>({...e,id:e.id,images:JSON.stringify(e.images||[])}))};try{let t=await fetch("/api/admin/packages/".concat(a),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),s=await t.json();if(!t.ok||!s.success)throw Error(s.message||"Error: ".concat(t.status));(0,u.Am)({title:"Package Updated",description:"Package details updated successfully."}),e.push("/admin_packages")}catch(e){b(e instanceof Error?e.message:"An unknown error occurred while updating the package."),console.error("Failed to update package:",e),(0,u.Am)({variant:"destructive",title:"Update Failed",description:e instanceof Error?e.message:"An unknown error occurred."})}finally{x(!1)}};return f?(0,s.jsxs)("div",{className:"flex justify-center items-center h-screen",children:[(0,s.jsx)(n.Z,{className:"h-8 w-8 animate-spin text-blue-500"}),(0,s.jsx)("p",{className:"ml-2",children:"Loading package details..."})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(d.default,{href:"/admin_packages",className:"text-gray-500 hover:text-gray-700",children:(0,s.jsx)(o.Z,{className:"h-5 w-5"})}),(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:"Edit Package"})]}),y&&(0,s.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:y}),(0,s.jsxs)("form",{onSubmit:S,className:"space-y-8",children:[(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,s.jsx)("h2",{className:"text-xl font-medium mb-4",children:"Basic Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Package Name *"}),(0,s.jsx)("input",{type:"text",id:"name",name:"name",required:!0,value:t.name,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration *"}),(0,s.jsx)("input",{type:"text",id:"duration",name:"duration",required:!0,placeholder:"e.g., 3 Days / 2 Nights",value:t.duration,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"base_price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Base Price *"}),(0,s.jsx)("input",{type:"number",id:"base_price",name:"base_price",required:!0,min:"0",step:"0.01",value:t.base_price,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"max_people",className:"block text-sm font-medium text-gray-700 mb-1",children:"Max People"}),(0,s.jsx)("input",{type:"number",id:"max_people",name:"max_people",min:"1",value:t.max_people,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,s.jsx)("textarea",{id:"description",name:"description",rows:3,value:t.description,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{className:"md:col-span-2 space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Itinerary"}),(0,s.jsxs)("button",{type:"button",onClick:()=>{g(e=>({...e,itinerary:[...e.itinerary,""]}))},className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4 mr-1"}),"Add Day"]})]}),t.itinerary.map((e,a)=>(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("label",{htmlFor:"itinerary_day_".concat(a+1),className:"block text-sm font-medium text-gray-700",children:["Day ",a+1]}),t.itinerary.length>1&&(0,s.jsxs)("button",{type:"button",onClick:()=>N(a),className:"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[(0,s.jsx)(l.Z,{className:"h-3 w-3 mr-1"}),"Remove Day"]})]}),(0,s.jsx)("textarea",{id:"itinerary_day_".concat(a+1),name:"itinerary_day_".concat(a+1),rows:3,value:e,onChange:e=>j(a,e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Details for Day ".concat(a+1,"...")})]},a)),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Enter detailed day-by-day itinerary."})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"included_services",className:"block text-sm font-medium text-gray-700 mb-1",children:"Included Services"}),(0,s.jsx)("textarea",{id:"included_services",name:"included_services",rows:3,value:t.included_services,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Airport transfers, Sightseeing, Meals, etc."})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"cancellation_policy",className:"block text-sm font-medium text-gray-700 mb-1",children:"Cancellation Policy"}),(0,s.jsx)("textarea",{id:"cancellation_policy",name:"cancellation_policy",rows:3,value:t.cancellation_policy,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Cancellation terms and conditions..."})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Package Images"}),a?(0,s.jsx)(m.w,{label:"Upload Images for the Package",onImagesUploaded:A,existingImages:t.images,parentId:a,type:"package",maxImages:10,helperText:"Manage images for the package. New images are uploaded and associated automatically. Removed images are disassociated upon clicking 'Update Package'."}):(0,s.jsx)("p",{children:"Loading Image Uploader..."})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"is_active",name:"is_active",checked:t.is_active,onChange:v,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active (visible to users)"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-medium",children:"Package Categories"}),(0,s.jsxs)("button",{type:"button",onClick:()=>{g(e=>({...e,package_categories:[...e.package_categories,{category_name:"",price:0,hotel_details:"",category_description:"",max_pax_included_in_price:2,images:[]}]}))},className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4 mr-1"}),"Add Category"]})]}),t.package_categories.map((e,r)=>(0,s.jsxs)("div",{className:"mb-8 border-b pb-6 last:border-b-0 last:pb-0",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-medium",children:["Category ",r+1]}),(0,s.jsxs)("button",{type:"button",onClick:()=>w(r),disabled:1===t.package_categories.length,className:"inline-flex items-center px-2 py-1 border border-transparent text-sm font-medium rounded-md ".concat(1===t.package_categories.length?"text-gray-400 bg-gray-100 cursor-not-allowed":"text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"),children:[(0,s.jsx)(l.Z,{className:"h-4 w-4 mr-1"}),"Remove"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Name *"}),(0,s.jsx)("input",{type:"text",required:!0,value:e.category_name,onChange:e=>_(r,"category_name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Standard, Deluxe, Premium"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price *"}),(0,s.jsx)("input",{type:"number",required:!0,min:"0",step:"0.01",value:e.price,onChange:e=>_(r,"price",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max People Included in Price"}),(0,s.jsx)("input",{type:"number",min:"1",value:e.max_pax_included_in_price,onChange:e=>_(r,"max_pax_included_in_price",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hotel Details"}),(0,s.jsx)("textarea",{rows:3,value:e.hotel_details,onChange:e=>_(r,"hotel_details",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Port Blair: Hotel Royal Palace - Deluxe AC Room, Havelock: Symphony Palms - Premium Cottage"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Description"}),(0,s.jsx)("textarea",{rows:2,value:e.category_description,onChange:e=>_(r,"category_description",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Additional information about this category"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Category Images (ID: ",e.id||"New",")"]}),(0,s.jsx)(m.w,{label:"Images for Category ".concat(r+1),onImagesUploaded:e=>k(r,e),existingImages:e.images||[],parentId:e.id||"temp-category-".concat(r,"-").concat(a),type:"package_category",maxImages:5,helperText:"Upload images specific to this category."})]})]})]},r))]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,s.jsx)(d.default,{href:"/admin_packages",className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:p||f,className:"px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ".concat(p||f?"opacity-75 cursor-not-allowed":""),children:p?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Z,{size:16,className:"animate-spin mr-2"})," Updating..."]}):"Update Package"})]})]})]})}},1079:function(e,a,t){"use strict";t.d(a,{w:function(){return l}});var s=t(7437),r=t(2265);let i=(0,t(9763).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var n=t(2489),o=t(5863),c=t(9397);function l(e){let{label:a,onImagesUploaded:t,existingImages:l=[],parentId:d,type:m,maxImages:u=10,helperText:g}=e,[p,x]=(0,r.useState)(l),[f,h]=(0,r.useState)(!1),[y,b]=(0,r.useState)(null),[v,j]=(0,r.useState)(!1),N=(0,r.useRef)(null),_=async e=>{let a=e.target.files;if(!a||0===a.length)return;if(p.length+a.length>u){b("You can only upload a maximum of ".concat(u," images"));return}h(!0),b(null);let s=new FormData;s.append("parentId",d.toString()),s.append("type",m),Array.from(a).forEach(e=>{s.append("images",e)});try{var r;let e=await fetch("/api/upload/images",{method:"POST",body:s});if(!e.ok){let a=await e.json();throw Error(a.message||a.error||"Failed to upload images")}let a=await e.json();(null===(r=a.message)||void 0===r?void 0:r.includes("Cloudflare environment"))&&j(!0);let i=a.imageUrls,n=[...p,...i];x(n),t(n)}catch(e){console.error("Upload error:",e),b(e instanceof Error?e.message:"Failed to upload images")}finally{h(!1),N.current&&(N.current.value="")}},k=e=>{let a=p.filter((a,t)=>t!==e);x(a),t(a)};return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:a}),(0,s.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 mb-3",children:[p.map((e,a)=>(0,s.jsxs)("div",{className:"relative group aspect-square border border-gray-200 rounded-md overflow-hidden shadow-sm",children:[v?(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 text-gray-500",children:(0,s.jsxs)("div",{className:"text-center p-2",children:[(0,s.jsx)(i,{size:24,className:"mx-auto mb-1"}),(0,s.jsxs)("span",{className:"text-xs",children:["Image ",a+1]})]})}):(0,s.jsx)("img",{src:e,alt:"Uploaded image ".concat(a+1),className:"w-full h-full object-cover"}),(0,s.jsx)("button",{type:"button",onClick:()=>k(a),className:"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity","aria-label":"Remove image",children:(0,s.jsx)(n.Z,{size:14})})]},a)),p.length<u&&(0,s.jsx)("button",{type:"button",onClick:()=>{N.current&&N.current.click()},disabled:f,className:"flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-md aspect-square hover:border-gray-400 transition-colors",children:f?(0,s.jsx)(o.Z,{className:"h-6 w-6 animate-spin text-gray-500"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{size:24,className:"text-gray-400"}),(0,s.jsx)("span",{className:"text-xs text-gray-500 mt-2",children:"Add Image"})]})})]}),(0,s.jsx)("input",{type:"file",ref:N,onChange:_,className:"hidden",accept:"image/*",multiple:p.length<u}),y&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:y}),v&&(0,s.jsxs)("p",{className:"text-amber-500 text-sm",children:[(0,s.jsx)("strong",{children:"Note:"})," In development mode, images are not actually stored. They will appear as placeholders."]}),g&&(0,s.jsx)("p",{className:"text-xs text-gray-500",children:g}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[p.length," of ",u," images uploaded"]})]})}},3340:function(e,a,t){"use strict";t.d(a,{Am:function(){return d}}),t(2265);let s=0,r=new Map,i=e=>{if(r.has(e))return;let a=setTimeout(()=>{r.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,a)},n=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},o=[],c={toasts:[]};function l(e){c=n(c,e),o.forEach(e=>{e(c)})}function d(e){let{...a}=e,t=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>l({type:"DISMISS_TOAST",toastId:t});return l({type:"ADD_TOAST",toast:{...a,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:t}})}}}},function(e){e.O(0,[2972,2971,2117,1744],function(){return e(e.s=152)}),_N_E=e.O()}]);