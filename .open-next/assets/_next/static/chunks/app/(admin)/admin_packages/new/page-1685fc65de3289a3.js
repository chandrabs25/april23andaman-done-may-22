(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9573],{6551:function(e,a,r){Promise.resolve().then(r.bind(r,513))},9763:function(e,a,r){"use strict";r.d(a,{Z:function(){return o}});var s=r(2265),t={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),o=(e,a)=>{let r=(0,s.forwardRef)((r,o)=>{let{color:i="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:m,...g}=r;return(0,s.createElement)("svg",{ref:o,...t,width:l,height:l,stroke:i,strokeWidth:d?24*Number(c)/Number(l):c,className:["lucide","lucide-".concat(n(e)),u].join(" "),...g},[...a.map(e=>{let[a,r]=e;return(0,s.createElement)(a,r)}),...Array.isArray(m)?m:[m]])});return r.displayName="".concat(e),r}},2660:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});let s=(0,r(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9554:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});let s=(0,r(9763).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},9397:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});let s=(0,r(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7648:function(e,a,r){"use strict";r.d(a,{default:function(){return t.a}});var s=r(2972),t=r.n(s)},9376:function(e,a,r){"use strict";var s=r(5475);r.o(s,"useParams")&&r.d(a,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(a,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(a,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(a,{useSearchParams:function(){return s.useSearchParams}})},513:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return d}});var s=r(7437),t=r(2265),n=r(9376),o=r(2660),i=r(9397),l=r(9554),c=r(7648);function d(){let e=(0,n.useRouter)(),[a,r]=(0,t.useState)(!1),[d,u]=(0,t.useState)(null),[m,g]=(0,t.useState)({name:"",description:"",duration:"",base_price:0,max_people:2,itinerary:"",included_services:"",images:"",cancellation_policy:"",is_active:!0,package_categories:[{category_name:"Standard",price:0,hotel_details:"",category_description:"",max_pax_included_in_price:2}]}),x=e=>{let{name:a,value:r,type:s}=e.target;if("checkbox"===s){let r=e.target.checked;g(e=>({...e,[a]:r}));return}if("number"===s){g(e=>({...e,[a]:parseFloat(r)||0}));return}g(e=>({...e,[a]:r}))},p=(e,a,r)=>{let s=[...m.package_categories];"price"===a||"max_pax_included_in_price"===a?s[e][a]="number"==typeof r?r:parseFloat(r)||0:s[e][a]=r,g(e=>({...e,package_categories:s}))},b=e=>{if(1===m.package_categories.length)return;let a=m.package_categories.filter((a,r)=>r!==e);g(e=>({...e,package_categories:a}))},f=async a=>{a.preventDefault(),r(!0),u(null);try{let a=await fetch("/api/admin/packages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(!a.ok){let e=await a.json();throw Error(e.message||"Error: ".concat(a.status))}let r=await a.json();if(r.success)e.push("/admin_packages");else throw Error(r.message||"Failed to create package")}catch(e){u(e instanceof Error?e.message:"An unknown error occurred"),console.error("Failed to create package:",e)}finally{r(!1)}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(c.default,{href:"/admin_packages",className:"text-gray-500 hover:text-gray-700",children:(0,s.jsx)(o.Z,{className:"h-5 w-5"})}),(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:"Create New Package"})]}),d&&(0,s.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:d}),(0,s.jsxs)("form",{onSubmit:f,className:"space-y-8",children:[(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,s.jsx)("h2",{className:"text-xl font-medium mb-4",children:"Basic Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Package Name *"}),(0,s.jsx)("input",{type:"text",id:"name",name:"name",required:!0,value:m.name,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration *"}),(0,s.jsx)("input",{type:"text",id:"duration",name:"duration",required:!0,placeholder:"e.g., 3 Days / 2 Nights",value:m.duration,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"base_price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Base Price *"}),(0,s.jsx)("input",{type:"number",id:"base_price",name:"base_price",required:!0,min:"0",step:"0.01",value:m.base_price,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"max_people",className:"block text-sm font-medium text-gray-700 mb-1",children:"Max People"}),(0,s.jsx)("input",{type:"number",id:"max_people",name:"max_people",min:"1",value:m.max_people,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,s.jsx)("textarea",{id:"description",name:"description",rows:3,value:m.description,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"itinerary",className:"block text-sm font-medium text-gray-700 mb-1",children:"Itinerary"}),(0,s.jsx)("textarea",{id:"itinerary",name:"itinerary",rows:5,value:m.itinerary,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Day 1: ... Day 2: ..."}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Enter detailed day-by-day itinerary"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"included_services",className:"block text-sm font-medium text-gray-700 mb-1",children:"Included Services"}),(0,s.jsx)("textarea",{id:"included_services",name:"included_services",rows:3,value:m.included_services,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Airport transfers, Sightseeing, Meals, etc."})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"cancellation_policy",className:"block text-sm font-medium text-gray-700 mb-1",children:"Cancellation Policy"}),(0,s.jsx)("textarea",{id:"cancellation_policy",name:"cancellation_policy",rows:3,value:m.cancellation_policy,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Cancellation terms and conditions..."})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"images",className:"block text-sm font-medium text-gray-700 mb-1",children:"Images"}),(0,s.jsx)("input",{type:"text",id:"images",name:"images",value:m.images,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Comma-separated image URLs or JSON array"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Enter comma-separated image URLs or a JSON array"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"is_active",name:"is_active",checked:m.is_active,onChange:e=>g(a=>({...a,is_active:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active (visible to users)"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-medium",children:"Package Categories"}),(0,s.jsxs)("button",{type:"button",onClick:()=>{g(e=>({...e,package_categories:[...e.package_categories,{category_name:"",price:0,hotel_details:"",category_description:"",max_pax_included_in_price:2}]}))},className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,s.jsx)(i.Z,{className:"h-4 w-4 mr-1"}),"Add Category"]})]}),m.package_categories.map((e,a)=>(0,s.jsxs)("div",{className:"mb-8 border-b pb-6 last:border-b-0 last:pb-0",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-medium",children:["Category ",a+1]}),(0,s.jsxs)("button",{type:"button",onClick:()=>b(a),disabled:1===m.package_categories.length,className:"inline-flex items-center px-2 py-1 border border-transparent text-sm font-medium rounded-md ".concat(1===m.package_categories.length?"text-gray-400 bg-gray-100 cursor-not-allowed":"text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"),children:[(0,s.jsx)(l.Z,{className:"h-4 w-4 mr-1"}),"Remove"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Name *"}),(0,s.jsx)("input",{type:"text",required:!0,value:e.category_name,onChange:e=>p(a,"category_name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Standard, Deluxe, Premium"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price *"}),(0,s.jsx)("input",{type:"number",required:!0,min:"0",step:"0.01",value:e.price,onChange:e=>p(a,"price",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max People Included in Price"}),(0,s.jsx)("input",{type:"number",min:"1",value:e.max_pax_included_in_price,onChange:e=>p(a,"max_pax_included_in_price",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hotel Details"}),(0,s.jsx)("textarea",{rows:3,value:e.hotel_details,onChange:e=>p(a,"hotel_details",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Port Blair: Hotel Royal Palace - Deluxe AC Room, Havelock: Symphony Palms - Premium Cottage"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Description"}),(0,s.jsx)("textarea",{rows:2,value:e.category_description,onChange:e=>p(a,"category_description",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Additional information about this category"})]})]})]},a))]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,s.jsx)(c.default,{href:"/admin_packages",className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:a,className:"px-4 py-2 border border-transparent rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ".concat(a?"opacity-75 cursor-not-allowed":""),children:a?"Creating...":"Create Package"})]})]})]})}}},function(e){e.O(0,[2972,2971,2117,1744],function(){return e(e.s=6551)}),_N_E=e.O()}]);