(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9573],{9165:function(e,t,a){Promise.resolve().then(a.bind(a,513))},9763:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var s=a(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let a=(0,s.forwardRef)((a,n)=>{let{color:l="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:m="",children:u,...g}=a;return(0,s.createElement)("svg",{ref:n,...r,width:o,height:o,stroke:l,strokeWidth:d?24*Number(c)/Number(o):c,className:["lucide","lucide-".concat(i(e)),m].join(" "),...g},[...t.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(u)?u:[u]])});return a.displayName="".concat(e),a}},2660:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5863:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9554:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},9397:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},2489:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7648:function(e,t,a){"use strict";a.d(t,{default:function(){return r.a}});var s=a(2972),r=a.n(s)},9376:function(e,t,a){"use strict";var s=a(5475);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},513:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var s=a(7437),r=a(2265),i=a(9376),n=a(2660),l=a(9397),o=a(9554),c=a(5863),d=a(7648),m=a(1079),u=a(3340);function g(){let e=(0,i.useRouter)(),[t,a]=(0,r.useState)(null),[g,x]=(0,r.useState)(null),[p,h]=(0,r.useState)(!1),[y,b]=(0,r.useState)({name:"",description:"",duration:"",number_of_days:1,base_price:0,max_people:2,itinerary_days:[{dayNumber:1,title:"",description:"",activities:[{name:"",time:"",duration:""}],meals:[""],accommodation:""}],itinerary_highlights:[""],itinerary_inclusions:[""],itinerary_exclusions:[""],itinerary_notes:"",included_services:"",images:[],cancellation_policy:"",is_active:!0,package_categories:[{category_name:"Standard",price:0,hotel_details:"",category_description:"",max_pax_included_in_price:2,images:[],activities:[""],meals:[""],accommodation:{hotel_name:"",room_type:"",amenities:[""],special_features:""}}]}),f=e=>{let{name:t,value:a,type:s}=e.target;if("checkbox"===s){let a=e.target.checked;b(e=>({...e,[t]:a}));return}if("number"===s){b(e=>({...e,[t]:parseFloat(a)||0}));return}b(e=>({...e,[t]:a}))},v=e=>{if(1===y.itinerary_days.length)return;let t=y.itinerary_days.filter((t,a)=>a!==e);b(e=>({...e,itinerary_days:t}))},j=(e,t,a)=>{let s=[...y.package_categories];"price"===t||"max_pax_included_in_price"===t?s[e][t]="number"==typeof a?a:parseFloat(a)||0:"images"!==t&&"activities"!==t&&"meals"!==t&&"accommodation"!==t&&(s[e][t]=a),b(e=>({...e,package_categories:s}))},N=(e,t)=>{let a=[...y.package_categories];a[e].images=t,b(e=>({...e,package_categories:a}))},_=(e,t,a)=>{let s=[...y.package_categories],r=[...s[e].activities];r[t]=a,s[e].activities=r,b(e=>({...e,package_categories:s}))},k=e=>{let t=[...y.package_categories];t[e].activities.push(""),b(e=>({...e,package_categories:t}))},w=(e,t)=>{let a=[...y.package_categories];a[e].activities.length>1&&(a[e].activities=a[e].activities.filter((e,a)=>a!==t)),b(e=>({...e,package_categories:a}))},C=(e,t,a)=>{let s=[...y.package_categories],r=[...s[e].meals];r[t]=a,s[e].meals=r,b(e=>({...e,package_categories:s}))},A=e=>{let t=[...y.package_categories];t[e].meals.push(""),b(e=>({...e,package_categories:t}))},S=(e,t)=>{let a=[...y.package_categories];a[e].meals.length>1&&(a[e].meals=a[e].meals.filter((e,a)=>a!==t)),b(e=>({...e,package_categories:a}))},P=(e,t,a)=>{let s=[...y.package_categories];s[e].accommodation&&(s[e].accommodation[t]=a),b(e=>({...e,package_categories:s}))},Z=(e,t,a)=>{let s=[...y.package_categories];if(s[e].accommodation){let r=[...s[e].accommodation.amenities];r[t]=a,s[e].accommodation.amenities=r}b(e=>({...e,package_categories:s}))},I=e=>{let t=[...y.package_categories];t[e].accommodation&&t[e].accommodation.amenities.push(""),b(e=>({...e,package_categories:t}))},T=(e,t)=>{let a=[...y.package_categories];a[e].accommodation&&a[e].accommodation.amenities.length>1&&(a[e].accommodation.amenities=a[e].accommodation.amenities.filter((e,a)=>a!==t)),b(e=>({...e,package_categories:a}))},D=e=>{if(1===y.package_categories.length)return;let t=y.package_categories.filter((t,a)=>a!==e);b(e=>({...e,package_categories:t}))},E=(e,t,a)=>{b(s=>{let r=[...s[e]];return r[t]=a,{...s,[e]:r}})},F=e=>{b(t=>({...t,[e]:[...t[e],""]}))},M=(e,t)=>{b(a=>{let s=a[e].filter((e,a)=>a!==t);return 0===s.length&&s.push(""),{...a,[e]:s}})},z=e=>{b(t=>({...t,itinerary_notes:e}))},R=(e,t,a)=>{let s=[...y.itinerary_days];s[e]={...s[e],[t]:a},b(e=>({...e,itinerary_days:s}))},O=(e,t,a,s)=>{let r=[...y.itinerary_days],i=[...r[e].activities];i[t]={...i[t],[a]:s},r[e].activities=i,b(e=>({...e,itinerary_days:r}))},U=e=>{let t=[...y.itinerary_days];t[e].activities.push({name:"",time:"",duration:""}),b(e=>({...e,itinerary_days:t}))},H=(e,t)=>{let a=[...y.itinerary_days];a[e].activities=a[e].activities.filter((e,a)=>a!==t),0===a[e].activities.length&&a[e].activities.push({name:"",time:"",duration:""}),b(e=>({...e,itinerary_days:a}))},q=(e,t,a)=>{let s=[...y.itinerary_days],r=[...s[e].meals];r[t]=a,s[e].meals=r,b(e=>({...e,itinerary_days:s}))},B=e=>{let t=[...y.itinerary_days];t[e].meals.push(""),b(e=>({...e,itinerary_days:t}))},L=(e,t)=>{let a=[...y.itinerary_days];a[e].meals=a[e].meals.filter((e,a)=>a!==t),0===a[e].meals.length&&a[e].meals.push(""),b(e=>({...e,itinerary_days:a}))},V=async t=>{t.preventDefault(),a(null),h(!0);let s={days:y.itinerary_days.map(e=>({day:e.dayNumber,title:e.title,description:e.description,activities:e.activities.filter(e=>""!==e.name.trim()),meals:e.meals.filter(e=>""!==e.trim()),accommodation:e.accommodation})),highlights:y.itinerary_highlights.filter(e=>""!==e.trim()),inclusions:y.itinerary_inclusions.filter(e=>""!==e.trim()),exclusions:y.itinerary_exclusions.filter(e=>""!==e.trim()),notes:y.itinerary_notes},r={...y,itinerary:s,package_categories:y.package_categories.map(e=>({...e,images:e.images||[],activities:e.activities.filter(e=>""!==e.trim()),meals:e.meals.filter(e=>""!==e.trim()),accommodation:e.accommodation?{...e.accommodation,amenities:e.accommodation.amenities.filter(e=>""!==e.trim())}:null}))};delete r.itinerary_days,delete r.itinerary_highlights,delete r.itinerary_inclusions,delete r.itinerary_exclusions,delete r.itinerary_notes;try{let t=await fetch("/api/admin/packages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),a=await t.json();if(!t.ok||!a.success)throw Error(a.message||"Error: ".concat(t.status));(0,u.Am)({title:"Package Created!",description:"The new package has been saved successfully."}),e.push("/admin_packages")}catch(e){a(e instanceof Error?e.message:"An unknown error occurred while creating the package"),console.error("Failed to create package:",e),(0,u.Am)({variant:"destructive",title:"Creation Failed",description:e instanceof Error?e.message:"Could not create package."})}finally{h(!1)}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(d.default,{href:"/admin_packages",className:"text-gray-500 hover:text-gray-700",children:(0,s.jsx)(n.Z,{className:"h-5 w-5"})}),(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:"Create New Package"})]}),t&&(0,s.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:t}),(0,s.jsxs)("form",{onSubmit:V,className:"space-y-8",children:[(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,s.jsx)("h2",{className:"text-xl font-medium mb-4",children:"Basic Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Package Name *"}),(0,s.jsx)("input",{type:"text",id:"name",name:"name",required:!0,value:y.name,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration *"}),(0,s.jsx)("input",{type:"text",id:"duration",name:"duration",required:!0,placeholder:"e.g., 3 Days / 2 Nights",value:y.duration,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"number_of_days",className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Days *"}),(0,s.jsx)("input",{type:"number",id:"number_of_days",name:"number_of_days",required:!0,min:"1",value:y.number_of_days,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 3"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"base_price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Base Price *"}),(0,s.jsx)("input",{type:"number",id:"base_price",name:"base_price",required:!0,min:"0",step:"0.01",value:y.base_price,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"max_people",className:"block text-sm font-medium text-gray-700 mb-1",children:"Max People"}),(0,s.jsx)("input",{type:"number",id:"max_people",name:"max_people",min:"1",value:y.max_people,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,s.jsx)("textarea",{id:"description",name:"description",rows:3,value:y.description,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{className:"md:col-span-2 space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Itinerary Days"}),(0,s.jsxs)("button",{type:"button",onClick:()=>{b(e=>({...e,itinerary_days:[...e.itinerary_days,{dayNumber:e.itinerary_days.length+1,title:"",description:"",activities:[{name:"",time:"",duration:""}],meals:[""],accommodation:""}]}))},className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[(0,s.jsx)(l.Z,{className:"h-4 w-4 mr-1"}),"Add Day"]})]}),y.itinerary_days.map((e,t)=>(0,s.jsxs)("div",{className:"space-y-2 border border-gray-200 p-4 rounded-md",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("h4",{className:"text-md font-semibold text-gray-700",children:["Day ",e.dayNumber]}),y.itinerary_days.length>1&&(0,s.jsxs)("button",{type:"button",onClick:()=>v(t),className:"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[(0,s.jsx)(o.Z,{className:"h-3 w-3 mr-1"}),"Remove Day"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"itinerary_day_title_".concat(t),className:"block text-xs font-medium text-gray-600",children:"Title"}),(0,s.jsx)("input",{type:"text",id:"itinerary_day_title_".concat(t),value:e.title,onChange:e=>R(t,"title",e.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Title for Day ".concat(e.dayNumber)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"itinerary_day_description_".concat(t),className:"block text-xs font-medium text-gray-600",children:"Description"}),(0,s.jsx)("textarea",{id:"itinerary_day_description_".concat(t),rows:2,value:e.description,onChange:e=>R(t,"description",e.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Details for Day ".concat(e.dayNumber,"...")})]}),(0,s.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h5",{className:"text-sm font-medium text-gray-600",children:"Activities"}),(0,s.jsxs)("button",{type:"button",onClick:()=>U(t),className:"text-xs px-2 py-1 bg-green-500 text-white rounded hover:bg-green-600",children:[(0,s.jsx)(l.Z,{size:12,className:"inline mr-1"}),"Add Activity"]})]}),e.activities.map((a,r)=>(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-2 items-end text-xs",children:[(0,s.jsxs)("div",{className:"col-span-5",children:[(0,s.jsx)("label",{className:"block text-xs font-extralight text-gray-500",children:"Name"}),(0,s.jsx)("input",{type:"text",placeholder:"Activity Name",value:a.name,onChange:e=>O(t,r,"name",e.target.value),className:"w-full px-2 py-1 border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400"})]}),(0,s.jsxs)("div",{className:"col-span-3",children:[(0,s.jsx)("label",{className:"block text-xs font-extralight text-gray-500",children:"Time"}),(0,s.jsx)("input",{type:"text",placeholder:"e.g. 09:00 AM",value:a.time,onChange:e=>O(t,r,"time",e.target.value),className:"w-full px-2 py-1 border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400"})]}),(0,s.jsxs)("div",{className:"col-span-3",children:[(0,s.jsx)("label",{className:"block text-xs font-extralight text-gray-500",children:"Duration"}),(0,s.jsx)("input",{type:"text",placeholder:"e.g. 2 hours",value:a.duration,onChange:e=>O(t,r,"duration",e.target.value),className:"w-full px-2 py-1 border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400"})]}),(0,s.jsx)("div",{className:"col-span-1",children:e.activities.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>H(t,r),className:"p-1 bg-red-500 text-white rounded hover:bg-red-600",children:(0,s.jsx)(o.Z,{size:12})})})]},r))]}),(0,s.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h5",{className:"text-sm font-medium text-gray-600",children:"Meals"}),(0,s.jsxs)("button",{type:"button",onClick:()=>B(t),className:"text-xs px-2 py-1 bg-green-500 text-white rounded hover:bg-green-600",children:[(0,s.jsx)(l.Z,{size:12,className:"inline mr-1"}),"Add Meal"]})]}),e.meals.map((a,r)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,s.jsx)("input",{type:"text",placeholder:"e.g. Breakfast, Lunch",value:a,onChange:e=>q(t,r,e.target.value),className:"flex-grow px-2 py-1 border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400"}),e.meals.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>L(t,r),className:"p-1 bg-red-500 text-white rounded hover:bg-red-600",children:(0,s.jsx)(o.Z,{size:12})})]},r))]}),(0,s.jsxs)("div",{className:"pt-2",children:[(0,s.jsx)("label",{htmlFor:"itinerary_day_accommodation_".concat(t),className:"block text-sm font-medium text-gray-600",children:"Accommodation"}),(0,s.jsx)("input",{type:"text",id:"itinerary_day_accommodation_".concat(t),value:e.accommodation,onChange:e=>R(t,"accommodation",e.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"e.g., Hotel Name - Room Type"})]})]},t)),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:'Click "Add Day" for multi-day packages.'})]}),(0,s.jsxs)("div",{className:"md:col-span-2 space-y-4 p-4 border border-gray-200 rounded-md",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-700",children:"Overall Itinerary Details"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:"Highlights"}),(0,s.jsxs)("button",{type:"button",onClick:()=>F("itinerary_highlights"),className:"text-xs px-2 py-1 bg-green-500 text-white rounded hover:bg-green-600",children:[(0,s.jsx)(l.Z,{size:12,className:"inline mr-1"}),"Add Highlight"]})]}),y.itinerary_highlights.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,s.jsx)("input",{type:"text",placeholder:"e.g., Visit to Cellular Jail",value:e,onChange:e=>E("itinerary_highlights",t,e.target.value),className:"flex-grow px-2 py-1 border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400"}),y.itinerary_highlights.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>M("itinerary_highlights",t),className:"p-1 bg-red-500 text-white rounded hover:bg-red-600",children:(0,s.jsx)(o.Z,{size:12})})]},t))]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:"Inclusions"}),(0,s.jsxs)("button",{type:"button",onClick:()=>F("itinerary_inclusions"),className:"text-xs px-2 py-1 bg-green-500 text-white rounded hover:bg-green-600",children:[(0,s.jsx)(l.Z,{size:12,className:"inline mr-1"}),"Add Inclusion"]})]}),y.itinerary_inclusions.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,s.jsx)("input",{type:"text",placeholder:"e.g., All Permits and Entry Tickets",value:e,onChange:e=>E("itinerary_inclusions",t,e.target.value),className:"flex-grow px-2 py-1 border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400"}),y.itinerary_inclusions.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>M("itinerary_inclusions",t),className:"p-1 bg-red-500 text-white rounded hover:bg-red-600",children:(0,s.jsx)(o.Z,{size:12})})]},t))]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:"Exclusions"}),(0,s.jsxs)("button",{type:"button",onClick:()=>F("itinerary_exclusions"),className:"text-xs px-2 py-1 bg-green-500 text-white rounded hover:bg-green-600",children:[(0,s.jsx)(l.Z,{size:12,className:"inline mr-1"}),"Add Exclusion"]})]}),y.itinerary_exclusions.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,s.jsx)("input",{type:"text",placeholder:"e.g., Personal Expenses",value:e,onChange:e=>E("itinerary_exclusions",t,e.target.value),className:"flex-grow px-2 py-1 border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400"}),y.itinerary_exclusions.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>M("itinerary_exclusions",t),className:"p-1 bg-red-500 text-white rounded hover:bg-red-600",children:(0,s.jsx)(o.Z,{size:12})})]},t))]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"itinerary_notes",className:"block text-sm font-medium text-gray-600",children:"Itinerary Notes"}),(0,s.jsx)("textarea",{id:"itinerary_notes",rows:3,value:y.itinerary_notes,onChange:e=>z(e.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Any special notes for the itinerary..."})]})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"included_services",className:"block text-sm font-medium text-gray-700 mb-1",children:"Included Services"}),(0,s.jsx)("textarea",{id:"included_services",name:"included_services",rows:3,value:y.included_services,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Airport transfers, Sightseeing, Meals, etc."})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"cancellation_policy",className:"block text-sm font-medium text-gray-700 mb-1",children:"Cancellation Policy"}),(0,s.jsx)("textarea",{id:"cancellation_policy",name:"cancellation_policy",rows:3,value:y.cancellation_policy,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Cancellation terms and conditions..."})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Package Images"}),(0,s.jsx)(m.w,{label:"Upload Images for the Package",onImagesUploaded:e=>{b(t=>({...t,images:e})),(0,u.Am)({title:"Main Images Staged",description:"Images are ready to be saved with the package."})},existingImages:y.images,parentId:g||"new-package-main-images",type:"package",maxImages:10,helperText:"Upload images that showcase the package. These will be saved when you create the package."})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"is_active",name:"is_active",checked:y.is_active,onChange:e=>b(t=>({...t,is_active:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active (visible to users)"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-medium",children:"Package Categories"}),(0,s.jsxs)("button",{type:"button",onClick:()=>{b(e=>({...e,package_categories:[...e.package_categories,{category_name:"",price:0,hotel_details:"",category_description:"",max_pax_included_in_price:2,images:[],activities:[""],meals:[""],accommodation:{hotel_name:"",room_type:"",amenities:[""],special_features:""}}]}))},className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,s.jsx)(l.Z,{className:"h-4 w-4 mr-1"}),"Add Category"]})]}),y.package_categories.map((e,t)=>{var a,r,i,n;return(0,s.jsxs)("div",{className:"mb-8 border-b pb-6 last:border-b-0 last:pb-0",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-medium",children:["Category ",t+1]}),(0,s.jsxs)("button",{type:"button",onClick:()=>D(t),disabled:1===y.package_categories.length,className:"inline-flex items-center px-2 py-1 border border-transparent text-sm font-medium rounded-md ".concat(1===y.package_categories.length?"text-gray-400 bg-gray-100 cursor-not-allowed":"text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"),children:[(0,s.jsx)(o.Z,{className:"h-4 w-4 mr-1"}),"Remove"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Name *"}),(0,s.jsx)("input",{type:"text",required:!0,value:e.category_name,onChange:e=>j(t,"category_name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Standard, Deluxe, Premium"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price *"}),(0,s.jsx)("input",{type:"number",required:!0,min:"0",step:"0.01",value:e.price,onChange:e=>j(t,"price",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max People Included in Price"}),(0,s.jsx)("input",{type:"number",min:"1",value:e.max_pax_included_in_price,onChange:e=>j(t,"max_pax_included_in_price",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hotel Details"}),(0,s.jsx)("textarea",{rows:3,value:e.hotel_details,onChange:e=>j(t,"hotel_details",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Port Blair: Hotel Royal Palace - Deluxe AC Room, Havelock: Symphony Palms - Premium Cottage"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Description"}),(0,s.jsx)("textarea",{rows:2,value:e.category_description,onChange:e=>j(t,"category_description",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Additional information about this category"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Images"}),(0,s.jsx)(m.w,{label:"Images for Category ".concat(t+1),onImagesUploaded:e=>N(t,e),existingImages:e.images,parentId:g||"new-pkg-category-".concat(t),type:"package_category",maxImages:5,helperText:"Upload images specific to this category. Images will be saved when you create the package."})]}),(0,s.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category Activities"}),(0,s.jsxs)("button",{type:"button",onClick:()=>k(t),className:"text-xs px-2 py-1 bg-green-500 text-white rounded hover:bg-green-600",children:[(0,s.jsx)(l.Z,{size:12,className:"inline mr-1"}),"Add Activity"]})]}),e.activities.map((a,r)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,s.jsx)("input",{type:"text",placeholder:"e.g., Private beach access, Scuba diving",value:a,onChange:e=>_(t,r,e.target.value),className:"flex-grow px-2 py-1 border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400"}),e.activities.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>w(t,r),className:"p-1 bg-red-500 text-white rounded hover:bg-red-600",children:(0,s.jsx)(o.Z,{size:12})})]},r))]}),(0,s.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category Meals"}),(0,s.jsxs)("button",{type:"button",onClick:()=>A(t),className:"text-xs px-2 py-1 bg-green-500 text-white rounded hover:bg-green-600",children:[(0,s.jsx)(l.Z,{size:12,className:"inline mr-1"}),"Add Meal"]})]}),e.meals.map((a,r)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,s.jsx)("input",{type:"text",placeholder:"e.g., Welcome breakfast, Premium dinner buffet",value:a,onChange:e=>C(t,r,e.target.value),className:"flex-grow px-2 py-1 border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400"}),e.meals.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>S(t,r),className:"p-1 bg-red-500 text-white rounded hover:bg-red-600",children:(0,s.jsx)(o.Z,{size:12})})]},r))]}),(0,s.jsxs)("div",{className:"md:col-span-2 space-y-4 p-4 border border-gray-200 rounded-md",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Category Accommodation Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",children:"Hotel Name"}),(0,s.jsx)("input",{type:"text",value:(null===(a=e.accommodation)||void 0===a?void 0:a.hotel_name)||"",onChange:e=>P(t,"hotel_name",e.target.value),className:"w-full mt-1 px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"e.g., Symphony Palms Beach Resort"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",children:"Room Type"}),(0,s.jsx)("input",{type:"text",value:(null===(r=e.accommodation)||void 0===r?void 0:r.room_type)||"",onChange:e=>P(t,"room_type",e.target.value),className:"w-full mt-1 px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"e.g., Ocean View Suite, Deluxe Room"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",children:"Special Features"}),(0,s.jsx)("textarea",{rows:2,value:(null===(i=e.accommodation)||void 0===i?void 0:i.special_features)||"",onChange:e=>P(t,"special_features",e.target.value),className:"w-full mt-1 px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"e.g., Complimentary spa access, Private balcony"})]}),(0,s.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",children:"Amenities"}),(0,s.jsxs)("button",{type:"button",onClick:()=>I(t),className:"text-xs px-2 py-1 bg-green-500 text-white rounded hover:bg-green-600",children:[(0,s.jsx)(l.Z,{size:12,className:"inline mr-1"}),"Add Amenity"]})]}),null===(n=e.accommodation)||void 0===n?void 0:n.amenities.map((a,r)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,s.jsx)("input",{type:"text",placeholder:"e.g., Mini bar, Room service, WiFi",value:a,onChange:e=>Z(t,r,e.target.value),className:"flex-grow px-2 py-1 border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-400"}),e.accommodation&&e.accommodation.amenities.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>T(t,r),className:"p-1 bg-red-500 text-white rounded hover:bg-red-600",children:(0,s.jsx)(o.Z,{size:12})})]},r))]})]})]})]})]},t)})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,s.jsx)(d.default,{href:"/admin_packages",className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:p||""===y.name||""===y.duration||y.base_price<=0,className:"px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ".concat(p?"opacity-75 cursor-not-allowed":""),children:p?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{size:16,className:"animate-spin mr-2"})," Creating Package..."]}):"Create Package"})]})]})]})}},1079:function(e,t,a){"use strict";a.d(t,{w:function(){return c}});var s=a(7437),r=a(2265);let i=(0,a(9763).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var n=a(2489),l=a(5863),o=a(9397);function c(e){let{label:t,onImagesUploaded:a,existingImages:c=[],parentId:d,type:m,maxImages:u=10,helperText:g}=e,[x,p]=(0,r.useState)(c),[h,y]=(0,r.useState)(!1),[b,f]=(0,r.useState)(null),[v,j]=(0,r.useState)(!1),N=(0,r.useRef)(null),_=async e=>{let t=e.target.files;if(!t||0===t.length)return;if(x.length+t.length>u){f("You can only upload a maximum of ".concat(u," images"));return}y(!0),f(null);let s=new FormData;s.append("parentId",d.toString()),s.append("type",m),Array.from(t).forEach(e=>{s.append("images",e)});try{var r;let e=await fetch("/api/upload/images",{method:"POST",body:s});if(!e.ok){let t=await e.json();throw Error(t.message||t.error||"Failed to upload images")}let t=await e.json();(null===(r=t.message)||void 0===r?void 0:r.includes("Cloudflare environment"))&&j(!0);let i=t.imageUrls,n=[...x,...i];p(n),a(n)}catch(e){console.error("Upload error:",e),f(e instanceof Error?e.message:"Failed to upload images")}finally{y(!1),N.current&&(N.current.value="")}},k=e=>{let t=x.filter((t,a)=>a!==e);p(t),a(t)};return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t}),(0,s.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 mb-3",children:[x.map((e,t)=>(0,s.jsxs)("div",{className:"relative group aspect-square border border-gray-200 rounded-md overflow-hidden shadow-sm",children:[v?(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 text-gray-500",children:(0,s.jsxs)("div",{className:"text-center p-2",children:[(0,s.jsx)(i,{size:24,className:"mx-auto mb-1"}),(0,s.jsxs)("span",{className:"text-xs",children:["Image ",t+1]})]})}):(0,s.jsx)("img",{src:e,alt:"Uploaded image ".concat(t+1),className:"w-full h-full object-cover"}),(0,s.jsx)("button",{type:"button",onClick:()=>k(t),className:"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity","aria-label":"Remove image",children:(0,s.jsx)(n.Z,{size:14})})]},t)),x.length<u&&(0,s.jsx)("button",{type:"button",onClick:()=>{N.current&&N.current.click()},disabled:h,className:"flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-md aspect-square hover:border-gray-400 transition-colors",children:h?(0,s.jsx)(l.Z,{className:"h-6 w-6 animate-spin text-gray-500"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{size:24,className:"text-gray-400"}),(0,s.jsx)("span",{className:"text-xs text-gray-500 mt-2",children:"Add Image"})]})})]}),(0,s.jsx)("input",{type:"file",ref:N,onChange:_,className:"hidden",accept:"image/*",multiple:x.length<u}),b&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:b}),v&&(0,s.jsxs)("p",{className:"text-amber-500 text-sm",children:[(0,s.jsx)("strong",{children:"Note:"})," In development mode, images are not actually stored. They will appear as placeholders."]}),g&&(0,s.jsx)("p",{className:"text-xs text-gray-500",children:g}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[x.length," of ",u," images uploaded"]})]})}},3340:function(e,t,a){"use strict";a.d(t,{Am:function(){return d}}),a(2265);let s=0,r=new Map,i=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],o={toasts:[]};function c(e){o=n(o,e),l.forEach(e=>{e(o)})}function d(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}}},function(e){e.O(0,[2972,2971,2117,1744],function(){return e(e.s=9165)}),_N_E=e.O()}]);