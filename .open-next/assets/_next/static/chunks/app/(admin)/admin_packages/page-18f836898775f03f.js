(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7039],{6244:function(e,t,a){Promise.resolve().then(a.bind(a,370))},9763:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var s=a(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,t)=>{let a=(0,s.forwardRef)((a,l)=>{let{color:n="currentColor",size:i=24,strokeWidth:d=2,absoluteStrokeWidth:o,className:u="",children:h,...x}=a;return(0,s.createElement)("svg",{ref:l,...r,width:i,height:i,stroke:n,strokeWidth:o?24*Number(d)/Number(i):d,className:["lucide","lucide-".concat(c(e)),u].join(" "),...x},[...t.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(h)?h:[h]])});return a.displayName="".concat(e),a}},2208:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9397:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7648:function(e,t,a){"use strict";a.d(t,{default:function(){return r.a}});var s=a(2972),r=a.n(s)},370:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var s=a(7437),r=a(2265),c=a(7648),l=a(9397),n=a(2208),i=a(9763);let d=(0,i.Z)("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),o=(0,i.Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);function u(){let[e,t]=(0,r.useState)([]),[a,i]=(0,r.useState)({totalItems:0,currentPage:1,pageSize:10,totalPages:0}),[u,h]=(0,r.useState)(!0),[x,g]=(0,r.useState)(null),[p,m]=(0,r.useState)("all");(0,r.useEffect)(()=>{(async()=>{h(!0),g(null);try{let e=new URLSearchParams({page:a.currentPage.toString(),limit:a.pageSize.toString()});"all"!==p&&e.append("status",p);let s=await fetch("/api/admin/packages?".concat(e.toString()));if(!s.ok)throw Error("Error: ".concat(s.status));let r=await s.json();if(r.success)t(r.data.packages),i(r.data.pagination);else throw Error(r.message)}catch(e){g(e instanceof Error?e.message:"An unknown error occurred"),console.error("Failed to fetch packages:",e)}finally{h(!1)}})()},[a.currentPage,a.pageSize,p]);let y=e=>{e>0&&e<=a.totalPages&&i(t=>({...t,currentPage:e}))},f=async a=>{if(confirm("Are you sure you want to delete this package?"))try{let s=await fetch("/api/admin/packages/".concat(a),{method:"DELETE"});if(!s.ok){let e=null;try{e=await s.json()}catch(e){}throw Error((null==e?void 0:e.message)||"Error: ".concat(s.status))}let r=await s.json();if(r.success)t(e.filter(e=>e.id!==a)),alert("Package deleted successfully");else throw Error(r.message)}catch(e){alert(e instanceof Error?e.message:"Failed to delete package"),console.error("Failed to delete package:",e)}},j=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:"Manage Packages"}),(0,s.jsxs)(c.default,{href:"/admin_packages/new",className:"bg-blue-600 text-white px-4 py-2 rounded-md flex items-center gap-2 hover:bg-blue-700 transition-colors",children:[(0,s.jsx)(l.Z,{className:"h-4 w-4"}),"New Package"]})]}),(0,s.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,s.jsx)("label",{htmlFor:"status-filter",className:"font-medium",children:"Status:"}),(0,s.jsxs)("select",{id:"status-filter",className:"border rounded-md px-3 py-2",value:p,onChange:e=>m(e.target.value),children:[(0,s.jsx)("option",{value:"all",children:"All"}),(0,s.jsx)("option",{value:"active",children:"Active"}),(0,s.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),x&&(0,s.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:x}),u?(0,s.jsxs)("div",{className:"text-center py-10",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-gray-300 border-t-blue-600"}),(0,s.jsx)("p",{className:"mt-2",children:"Loading packages..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"ID"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"Name"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"Duration"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"Base Price"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"Status"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"Created"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===e.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:7,className:"py-4 px-4 text-center text-gray-500",children:"No packages found"})}):e.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"py-3 px-4",children:e.id}),(0,s.jsx)("td",{className:"py-3 px-4",children:e.name}),(0,s.jsx)("td",{className:"py-3 px-4",children:e.duration}),(0,s.jsxs)("td",{className:"py-3 px-4",children:["$",e.base_price.toFixed(2)]}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Active":"Inactive"})}),(0,s.jsx)("td",{className:"py-3 px-4",children:j(e.created_at)}),(0,s.jsxs)("td",{className:"py-3 px-4 flex space-x-2",children:[(0,s.jsx)(c.default,{href:"/packages/".concat(e.id),className:"text-blue-600 hover:text-blue-800",title:"View",children:(0,s.jsx)(n.Z,{className:"h-5 w-5"})}),(0,s.jsx)(c.default,{href:"/admin_packages/".concat(e.id,"/edit"),className:"text-yellow-600 hover:text-yellow-800",title:"Edit",children:(0,s.jsx)(d,{className:"h-5 w-5"})}),(0,s.jsx)("button",{onClick:()=>f(e.id),className:"text-red-600 hover:text-red-800",title:"Delete",children:(0,s.jsx)(o,{className:"h-5 w-5"})})]})]},e.id))})]})}),a.totalPages>1&&(0,s.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["Showing ",(a.currentPage-1)*a.pageSize+1," to"," ",Math.min(a.currentPage*a.pageSize,a.totalItems)," of"," ",a.totalItems," packages"]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>y(a.currentPage-1),disabled:1===a.currentPage,className:"px-3 py-1 rounded ".concat(1===a.currentPage?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Previous"}),[...Array(a.totalPages)].map((e,t)=>(0,s.jsx)("button",{onClick:()=>y(t+1),className:"px-3 py-1 rounded ".concat(a.currentPage===t+1?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:t+1},t)),(0,s.jsx)("button",{onClick:()=>y(a.currentPage+1),disabled:a.currentPage===a.totalPages,className:"px-3 py-1 rounded ".concat(a.currentPage===a.totalPages?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Next"})]})]})]})]})}}},function(e){e.O(0,[2972,2971,2117,1744],function(){return e(e.s=6244)}),_N_E=e.O()}]);