(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9736],{4704:function(e,s,t){Promise.resolve().then(t.bind(t,1676))},9763:function(e,s,t){"use strict";t.d(s,{Z:function(){return o}});var r=t(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),o=(e,s)=>{let t=(0,r.forwardRef)((t,o)=>{let{color:c="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:u,className:d="",children:m,...h}=t;return(0,r.createElement)("svg",{ref:o,...n,width:l,height:l,stroke:c,strokeWidth:u?24*Number(i)/Number(l):i,className:["lucide","lucide-".concat(a(e)),d].join(" "),...h},[...s.map(e=>{let[s,t]=e;return(0,r.createElement)(s,t)}),...Array.isArray(m)?m:[m]])});return t.displayName="".concat(e),t}},3639:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},5302:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},5863:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3774:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},7648:function(e,s,t){"use strict";t.d(s,{default:function(){return n.a}});var r=t(2972),n=t.n(r)},9376:function(e,s,t){"use strict";var r=t(5475);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},1676:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return g}});var r=t(7437),n=t(2265),a=t(9376),o=t(7648),c=t(5863),l=t(3639),i=t(3774),u=t(5302),d=t(9889);let m=()=>(0,r.jsxs)("div",{className:"min-h-screen flex items-center justify-center",children:[(0,r.jsx)(c.Z,{className:"h-8 w-8 animate-spin text-blue-600"}),(0,r.jsx)("span",{className:"ml-2",children:"Loading confirmation..."})]});function h(){var e;let s=(0,a.useRouter)(),t=(0,a.useParams)(),n=(0,a.useSearchParams)(),c=t.id,h=n.get("paymentId"),{data:g,error:x,status:f}=(0,d.i)(c?"/api/bookings/".concat(c):null),p=null==g?void 0:g.data;if("loading"===f)return(0,r.jsx)(m,{});if("error"===f)return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center text-center px-4 py-10",children:[(0,r.jsx)(l.Z,{className:"h-12 w-12 text-red-500 mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-semibold text-red-600 mb-4",children:"Error Loading Confirmation"}),(0,r.jsx)("p",{className:"text-gray-700 mb-6",children:(null==x?void 0:x.message)||"Could not fetch booking details."}),(0,r.jsx)(o.default,{href:"/user/bookings",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Back to My Bookings"})]});if("success"===f&&!p)return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center text-center px-4 py-10",children:[(0,r.jsx)(i.Z,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Booking Not Found"}),(0,r.jsxs)("p",{className:"text-gray-600 mb-6",children:["Could not find details for booking ID: ",c]}),(0,r.jsx)(o.default,{href:"/user/bookings",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Back to My Bookings"})]});if(!p)return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center text-center px-4 py-10",children:[(0,r.jsx)(l.Z,{className:"h-12 w-12 text-orange-500 mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Data Error"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Could not display booking details. Please try refreshing."}),(0,r.jsx)(o.default,{href:"/user/bookings",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Back to My Bookings"})]});let b={};if(p.payment_details)try{b=JSON.parse(p.payment_details)}catch(e){console.error("Failed to parse payment details JSON:",p.payment_details)}let j=(null==b?void 0:b.paymentId)||h||"N/A",N=p.guest_name||(null===(e=p.user_id)||void 0===e?void 0:e.toString())||"N/A",y=p.guest_email||"N/A",k=p.guest_phone||"N/A";return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,r.jsx)("div",{className:"container mx-auto px-4",children:(0,r.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-8 border-b text-center",children:[(0,r.jsx)(u.Z,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Booking Confirmed!"}),(0,r.jsx)("p",{className:"text-gray-600",children:"paid"===p.payment_status?"Your booking is confirmed and payment was successful.":"Your booking is confirmed. Payment status: "+p.payment_status})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4 pb-2 border-b",children:"Booking Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[" ",(0,r.jsx)("p",{className:"text-gray-500 mb-1",children:"Booking ID"})," ",(0,r.jsx)("p",{className:"font-medium break-words",children:p.id})," "]}),(0,r.jsxs)("div",{children:[" ",(0,r.jsx)("p",{className:"text-gray-500 mb-1",children:"Package"})," ",(0,r.jsx)("p",{className:"font-medium",children:p.package_name||"Package ID: ".concat(p.package_id||"N/A")})," "]}),(0,r.jsxs)("div",{children:[" ",(0,r.jsx)("p",{className:"text-gray-500 mb-1",children:"Travel Dates"})," ",(0,r.jsxs)("p",{className:"font-medium",children:[p.start_date," to ",p.end_date]})," "]}),(0,r.jsxs)("div",{children:[" ",(0,r.jsx)("p",{className:"text-gray-500 mb-1",children:"Guests"})," ",(0,r.jsx)("p",{className:"font-medium",children:p.total_people})," "]}),p.special_requests&&(0,r.jsxs)("div",{className:"md:col-span-2",children:[" ",(0,r.jsx)("p",{className:"text-gray-500 mb-1",children:"Special Requests"})," ",(0,r.jsx)("p",{className:"font-medium whitespace-pre-wrap",children:p.special_requests})," "]})]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4 pb-2 border-b",children:"Payment Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[" ",(0,r.jsx)("p",{className:"text-gray-500 mb-1",children:"Total Amount"})," ",(0,r.jsxs)("p",{className:"font-medium",children:["â‚¹",p.total_amount.toLocaleString("en-IN")]})," "]}),(0,r.jsxs)("div",{children:[" ",(0,r.jsx)("p",{className:"text-gray-500 mb-1",children:"Payment Status"})," ",(0,r.jsx)("p",{className:"font-medium capitalize",children:p.payment_status})," "]}),"paid"===p.payment_status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[" ",(0,r.jsx)("p",{className:"text-gray-500 mb-1",children:"Payment ID"})," ",(0,r.jsx)("p",{className:"font-medium break-words",children:j})," "]}),(0,r.jsxs)("div",{children:[" ",(0,r.jsx)("p",{className:"text-gray-500 mb-1",children:"Payment Method"})," ",(0,r.jsx)("p",{className:"font-medium",children:"Online (Razorpay)"})," "]})]})]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4 pb-2 border-b",children:"Your Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[" ",(0,r.jsx)("p",{className:"text-gray-500 mb-1",children:"Name"})," ",(0,r.jsx)("p",{className:"font-medium",children:N})," "]}),(0,r.jsxs)("div",{children:[" ",(0,r.jsx)("p",{className:"text-gray-500 mb-1",children:"Email"})," ",(0,r.jsx)("p",{className:"font-medium break-words",children:y})," "]}),(0,r.jsxs)("div",{children:[" ",(0,r.jsx)("p",{className:"text-gray-500 mb-1",children:"Phone"})," ",(0,r.jsx)("p",{className:"font-medium",children:k})," "]})]})]}),(0,r.jsx)("div",{className:"bg-blue-50 p-4 rounded-md mb-8",children:(0,r.jsxs)("p",{className:"text-sm text-blue-700",children:["A confirmation email","N/A"!==y?" has been sent to ".concat(y):""," with all the details. Please check your inbox (and spam folder)."]})}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4",children:[(0,r.jsx)("button",{onClick:()=>{alert("Receipt download functionality to be implemented.")},disabled:"paid"!==p.payment_status,className:"bg-white border border-blue-600 text-blue-600 hover:bg-blue-50 font-medium py-2 px-4 rounded-md flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:" Download Receipt "}),(0,r.jsx)("button",{onClick:()=>{p.package_id?s.push("/packages/".concat(p.package_id)):alert("Package details unavailable for this booking.")},disabled:!p.package_id,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:" View Package Details "})]})]})]}),(0,r.jsx)("div",{className:"mt-8 text-center",children:(0,r.jsx)(o.default,{href:"/user/bookings",className:"text-blue-600 hover:text-blue-800 font-medium",children:" View All My Bookings "})})]})})})}function g(){return(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)(m,{}),children:(0,r.jsx)(h,{})})}},9889:function(e,s,t){"use strict";t.d(s,{i:function(){return n},q:function(){return a}});var r=t(2265);function n(e,s){let t=(0,r.useRef)(!0);t.current&&(console.log("[useFetch] Hook initialized. URL:",e),t.current=!1);let[n,a]=(0,r.useState)({data:null,error:null,status:"idle"}),o=(0,r.useRef)(e),c=(0,r.useRef)(s);JSON.stringify(c.current)!==JSON.stringify(s)&&(c.current=s);let l=(0,r.useRef)(!0);return(0,r.useEffect)(()=>{if(console.log("[useFetch] useEffect entering. URL:",e,"Initial fetch:",l.current),o.current===e&&null!==e&&!l.current){console.log("[useFetch] useEffect skipped - URL unchanged and not first render");return}l.current=!1,o.current=e,console.log("[useFetch] useEffect triggered. URL:",e),(async()=>{if(console.log("[useFetch] fetchData started. URL:",e),!e){console.log("[useFetch] URL is null, setting state to idle/null."),a({data:null,error:null,status:"idle"});return}console.log("[useFetch] Resetting state and setting status to loading."),a({data:null,error:null,status:"loading"});try{let s;console.log("[useFetch] Attempting fetch to URL:",e);let t=e.startsWith("http")?e:"".concat(window.location.origin).concat(e);console.log("[useFetch] Full URL for fetch:",t);let r=await fetch(t,{...c.current,credentials:"include"});console.log("[useFetch] Fetch completed. URL:",e,"Status:",r.status);try{console.log("[useFetch] Attempting response.json(). URL:",e),s=await r.json(),console.log("[useFetch] response.json() successful. URL:",e)}catch(s){throw console.error("[useFetch] response.json() FAILED. URL:",e,"Error:",s),Error("Request failed with status ".concat(r.status," and non-JSON response."))}if(!r.ok){let t=(null==s?void 0:s.message)||r.statusText||"HTTP error! Status: ".concat(r.status);throw console.warn("[useFetch] Response not OK. Status:",r.status,"URL:",e,"Throwing error:",t),Error(t)}if(console.log("[useFetch] Response OK. Checking result.success. URL:",e),s.success)console.log("[useFetch] result.success is true. URL:",e),void 0!==s.data?(console.log("[useFetch] Setting state data and status=success. URL:",e),a({data:s.data,error:null,status:"success"})):(console.warn("[useFetch] Fetch successful (result.success=true) but result.data is undefined. Setting state data=null, status=success. URL: ".concat(e)),a({data:null,error:null,status:"success"}));else{let t=s.message||"API returned success: false";throw console.warn("[useFetch] result.success is false. URL:",e,"Throwing error:",t),Error(t)}}catch(t){console.error("[useFetch] CATCH block error for URL ".concat(e,":"),t);let s=t instanceof Error?t:Error("Unknown fetch error occurred");console.log("[useFetch] Setting state error and status=error. URL:",e),a({data:null,error:s,status:"error"})}})()},[e]),console.log("[useFetch] Returning state for URL:",e,{status:n.status}),{data:n.data,error:n.error,status:n.status,isLoading:"loading"===n.status}}function a(e){let s=(0,r.useRef)(!0);s.current&&(console.log("[useSubmit] Hook initialized. Initial URL:",e),s.current=!1);let[t,n]=(0,r.useState)(null),[a,o]=(0,r.useState)(null),[c,l]=(0,r.useState)("idle");return{submit:async function(s){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST",r=arguments.length>2?arguments[2]:void 0,a=r||e;if(console.log("[useSubmit] submit function called. Target URL:",a,"Method:",t),l("loading"),n(null),o(null),!a)return console.error("[useSubmit] No URL provided (initial or override). Aborting submission."),o(Error("No URL specified for submission.")),l("error"),{success:!1,error:"No URL specified for submission."};try{let e;let r={method:t,headers:{"Content-Type":"application/json",Accept:"application/json"},body:"DELETE"!==t?JSON.stringify(s):void 0,credentials:"include"};console.log("[useSubmit] Attempting fetch. URL:",a);let o=await fetch(a,r);console.log("[useSubmit] Fetch completed. URL:",a,"Status:",o.status);try{console.log("[useSubmit] Attempting response.json(). URL:",a),204===o.status||"0"===o.headers.get("content-length")?(console.log("[useSubmit] Received 204 No Content or empty body. Assuming success."),e={success:!0}):e=await o.json(),console.log("[useSubmit] response.json() successful or handled empty. URL:",a)}catch(e){throw console.error("[useSubmit] response.json() FAILED. URL:",a,"Error:",e),Error("Request failed with status ".concat(o.status," and non-JSON response."))}if(console.log("[useSubmit] Checking response.ok and result.success. URL:",a),o.ok&&(void 0===e.success||!0===e.success)){if(console.log("[useSubmit] Response OK and result.success is true/undefined. URL:",a),void 0!==e.data)return console.log("[useSubmit] Setting data and status=success. URL:",a),n(e.data),l("success"),{success:!0,data:e.data};return n(null),l("success"),console.warn("[useSubmit] Submit successful (result.success=true/undefined) but result.data is undefined. Setting data=null, status=success. URL: ".concat(a)),{success:!0,data:null}}{let s=e.message||"API Error: Status ".concat(o.status,", Success Flag: ").concat(e.success);throw console.warn("[useSubmit] Response NOT OK or result.success is false. URL:",a,"Throwing error:",s),Error(s)}}catch(s){console.error("[useSubmit] CATCH block error. URL:",a,"Error:",s);let e=s instanceof Error?s.message:"Unknown submit error occurred";return console.log("[useSubmit] Setting error state and status=error. URL:",a),o(Error(e)),l("error"),{success:!1,error:e}}},data:t,error:a,status:c,isLoading:"loading"===c,reset:()=>{console.log("[useSubmit] reset function called."),n(null),o(null),l("idle")}}}}},function(e){e.O(0,[2972,2971,2117,1744],function(){return e(e.s=4704)}),_N_E=e.O()}]);