(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5208],{7366:function(e,s,t){Promise.resolve().then(t.bind(t,3996))},9763:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var a=t(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),c=(e,s)=>{let t=(0,a.forwardRef)((t,c)=>{let{color:l="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:u="",children:m,...x}=t;return(0,a.createElement)("svg",{ref:c,...r,width:i,height:i,stroke:l,strokeWidth:d?24*Number(o)/Number(i):o,className:["lucide","lucide-".concat(n(e)),u].join(" "),...x},[...s.map(e=>{let[s,t]=e;return(0,a.createElement)(s,t)}),...Array.isArray(m)?m:[m]])});return t.displayName="".concat(e),t}},3639:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},6858:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},401:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},1723:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},3245:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},5863:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3774:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},5805:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},7648:function(e,s,t){"use strict";t.d(s,{default:function(){return r.a}});var a=t(2972),r=t.n(a)},9376:function(e,s,t){"use strict";var a=t(5475);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},3996:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return b},dynamic:function(){return p}});var a=t(7437),r=t(2265),n=t(9376),c=t(7648),l=t(5863),i=t(3639),o=t(3774),d=t(1723),u=t(5805),m=t(401),x=t(6858),h=t(3245),g=t(9889);let p="force-dynamic",f=()=>(0,a.jsxs)("div",{className:"min-h-screen flex items-center justify-center",children:[(0,a.jsx)(l.Z,{className:"h-8 w-8 animate-spin text-blue-600"}),(0,a.jsx)("span",{className:"ml-2",children:"Loading package details..."})]});function y(){var e,s,t,l,p,y,b,j;console.log("%c[ItineraryPageContent] Component definition reached!","color: lime; font-weight: bold;");let N=(0,n.useParams)();(0,n.useRouter)();let v=N.id,[k,w]=(0,r.useState)(1),R=v?"/api/packages/".concat(v):null,{data:S,error:P,status:L}=(0,g.i)(R),[A,F]=(0,r.useState)(null);if((0,r.useEffect)(()=>{console.log("[Page ".concat(v,"] Fetch status changed: ").concat(L)),"error"===L&&console.error("[Page ".concat(v,"] Fetch error:"),P),"success"!==L||(console.log("[Page ".concat(v,"] Fetch successful. API Response:"),S),S||console.warn("[Page ".concat(v,"] Fetch successful but apiResponse.data is missing or null.")))},[L,P,S,v]),(0,r.useEffect)(()=>{if(console.log("[Page ".concat(v,"] Processing Effect triggered. apiResponse:"),S),S){var e,s,t;console.log("[Page ".concat(v,"] apiResponse has data. Processing... Raw data:"),S);let a={...S},r={days:[],highlights:[],inclusions:[],exclusions:[]};if(a.itinerary&&"string"==typeof a.itinerary)try{console.log("[Page ".concat(v,"] Attempting to parse itinerary string."));let e=JSON.parse(a.itinerary);console.log("[Page ".concat(v,"] Successfully parsed itinerary.")),r.highlights=Array.isArray(e.highlights)?e.highlights:[],r.inclusions=Array.isArray(e.inclusions)?e.inclusions:[],r.exclusions=Array.isArray(e.exclusions)?e.exclusions:[],r.days=Array.isArray(e.days)?e.days:[]}catch(e){console.error("[Page ".concat(v,"] FAILED to parse itinerary JSON. Error:"),e),console.error("[Page ".concat(v,"] Offending itinerary string was:"),a.itinerary)}else console.warn("[Page ".concat(v,"] No itinerary string found or not a string."));if(a.included_services&&"string"==typeof a.included_services&&!(null===(e=r.inclusions)||void 0===e?void 0:e.length)){console.log("[Page ".concat(v,"] Trying included_services."));try{let e=JSON.parse(a.included_services);console.log("[Page ".concat(v,"] Successfully parsed included_services as JSON.")),Array.isArray(e)?r.inclusions=e:(console.warn("[Page ".concat(v,"] Parsed included_services is not an array. Falling back.")),r.inclusions=a.included_services.split(",").map(e=>e.trim()).filter(e=>e))}catch(e){console.warn("[Page ".concat(v,"] Failed to parse included_services as JSON. Falling back to comma split. Error:"),e),r.inclusions=a.included_services.split(",").map(e=>e.trim()).filter(e=>e)}}a.parsedItinerary=r,a.bestTimeToVisit=null!==(s=a.bestTimeToVisit)&&void 0!==s?s:"October to May",a.howToReach=null!==(t=a.howToReach)&&void 0!==t?t:"Varies (Ferry/Flight)",console.log("[Page ".concat(v,"] Setting packageData state with processed data:"),a),F(a),w(1)}else"success"!==L||S||(console.warn("[Page ".concat(v,"] Fetch was successful but apiResponse.data is missing. Setting packageData to null.")),F(null))},[S,L,v]),console.log("[Page ".concat(v,"] Rendering component. Status: ").concat(L,", Has packageData: ").concat(!!A)),A&&console.log("[Page ".concat(v,"] Current packageData state:"),A),"loading"===L||"idle"===L)return(0,a.jsx)(f,{});if("error"===L)return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center text-center px-4 py-10",children:[(0,a.jsx)(i.Z,{className:"h-12 w-12 text-red-500 mb-4"}),(0,a.jsx)("h2",{className:"text-2xl font-semibold text-red-600 mb-4",children:"Error Loading Package"}),(0,a.jsx)("p",{className:"text-gray-700 mb-6",children:(null==P?void 0:P.message)||"Could not fetch package details."}),(0,a.jsx)(c.default,{href:"/packages",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Back to Packages"})]});if("success"===L&&!A)return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center text-center px-4 py-10",children:[(0,a.jsx)(o.Z,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Package Not Found"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:["The package you are looking for (ID: ",v,") does not exist or is unavailable."]}),(0,a.jsx)(c.default,{href:"/packages",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Back to Packages"})]});if(!A)return console.error("[Page ".concat(v,"] Rendering Guard Clause - packageData is unexpectedly null/undefined when status is '").concat(L,"'. This shouldn't normally happen.")),(0,a.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center text-center px-4 py-10",children:[(0,a.jsx)(i.Z,{className:"h-12 w-12 text-orange-500 mb-4"}),(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Data Error"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Could not display package details. Please try refreshing."}),(0,a.jsx)(c.default,{href:"/packages",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Back to Packages"})]});let U=null!==(p=null===(e=A.parsedItinerary)||void 0===e?void 0:e.days)&&void 0!==p?p:[],E=null!==(y=null===(s=A.parsedItinerary)||void 0===s?void 0:s.highlights)&&void 0!==y?y:[],Z=null!==(b=null===(t=A.parsedItinerary)||void 0===t?void 0:t.inclusions)&&void 0!==b?b:[],I=null!==(j=null===(l=A.parsedItinerary)||void 0===l?void 0:l.exclusions)&&void 0!==j?j:[];return(0,a.jsx)("div",{className:"bg-gray-50 min-h-screen py-8 md:py-12",children:(0,a.jsxs)("div",{className:"container mx-auto px-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden mb-8",children:[(0,a.jsxs)("div",{className:"bg-blue-600 text-white p-4 md:p-6",children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-bold mb-2",children:A.name}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-xs sm:text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[" ",(0,a.jsx)(d.Z,{size:16,className:"mr-1"})," ",(0,a.jsx)("span",{children:A.duration})," "]}),(0,a.jsxs)("div",{className:"flex items-center",children:[" ",(0,a.jsx)(o.Z,{size:16,className:"mr-1"})," ",(0,a.jsx)("span",{children:"Andaman Islands"})," "]}),A.max_people&&(0,a.jsxs)("div",{className:"flex items-center",children:[" ",(0,a.jsx)(u.Z,{size:16,className:"mr-1"})," ",(0,a.jsxs)("span",{children:["Max ",A.max_people," people"]})," "]})]})]}),(0,a.jsxs)("div",{className:"p-4 md:p-6",children:[(0,a.jsxs)("p",{className:"text-gray-700 mb-6 text-sm md:text-base",children:[" ",A.description||"Detailed description coming soon."," "]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 order-1 md:order-1",children:[(0,a.jsx)("h3",{className:"text-base md:text-lg font-semibold mb-2 md:mb-3 text-blue-600",children:"Price"}),(0,a.jsxs)("p",{className:"text-xl md:text-2xl font-bold",children:["₹",A.base_price.toLocaleString("en-IN")]}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-gray-500",children:"per person (starting)"}),(0,a.jsx)(c.default,{href:"/packages/".concat(A.id,"/book"),className:"mt-3 md:mt-4 block w-full bg-blue-600 hover:bg-blue-700 text-white text-center py-2 px-4 rounded-md transition duration-300 text-sm md:text-base",children:" Book Now "})]}),(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 order-2 md:order-2",children:[(0,a.jsx)("h3",{className:"text-base md:text-lg font-semibold mb-2 md:mb-3 text-blue-600",children:"Highlights"}),E.length>0?(0,a.jsxs)("ul",{className:"space-y-1.5 md:space-y-2",children:[" ",E.slice(0,4).map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start",children:[" ",(0,a.jsx)(m.Z,{size:14,className:"mr-2 text-green-500 flex-shrink-0 mt-0.5 md:mt-1"})," ",(0,a.jsx)("span",{className:"text-xs md:text-sm",children:e})," "]},"hl-".concat(s)))," ",E.length>4&&(0,a.jsxs)("li",{className:"text-xs md:text-sm text-blue-600 mt-1",children:["+ ",E.length-4," more highlights"]})," "]}):(0,a.jsx)("p",{className:"text-xs md:text-sm text-gray-500 italic",children:"Highlights not specified."})]}),(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 order-3 md:order-3",children:[(0,a.jsx)("h3",{className:"text-base md:text-lg font-semibold mb-2 md:mb-3 text-blue-600",children:"Inclusions"}),Z.length>0?(0,a.jsxs)("ul",{className:"space-y-1.5 md:space-y-2",children:[" ",Z.slice(0,4).map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start",children:[" ",(0,a.jsx)(m.Z,{size:14,className:"mr-2 text-green-500 flex-shrink-0 mt-0.5 md:mt-1"})," ",(0,a.jsx)("span",{className:"text-xs md:text-sm",children:e})," "]},"inc-".concat(s)))," ",Z.length>4&&(0,a.jsxs)("li",{className:"text-xs md:text-sm text-blue-600 mt-1",children:["+ ",Z.length-4," more inclusions"]})," "]}):(0,a.jsx)("p",{className:"text-xs md:text-sm text-gray-500 italic",children:"Inclusions not specified."})]})]}),U.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-6 md:mb-8",children:[(0,a.jsx)("h2",{className:"text-xl md:text-2xl font-bold mb-3 md:mb-4",children:"Itinerary"}),(0,a.jsx)("div",{className:"flex overflow-x-auto pb-2 space-x-2 border-b border-gray-200 mb-4",children:U.map(e=>(0,a.jsxs)("button",{onClick:()=>{console.log("[Page ".concat(v,"] Setting selected day to: ").concat(e.day)),w(e.day)},className:"px-3 py-2 rounded-t-md whitespace-nowrap text-sm transition-colors ".concat(k===e.day?"bg-blue-600 text-white font-medium":"bg-transparent text-gray-600 hover:bg-gray-100 hover:text-gray-800"),children:["Day ",e.day," ",(0,a.jsxs)("span",{className:"hidden sm:inline",children:[": ",e.title]})]},e.day))})]}),U.map(e=>(Array.isArray(e.activities)||console.error("[Page ".concat(v,"] Day ").concat(e.day," activities is NOT an array:"),e.activities),Array.isArray(e.meals)||console.error("[Page ".concat(v,"] Day ").concat(e.day," meals is NOT an array:"),e.meals),(0,a.jsxs)("div",{className:"".concat(k===e.day?"block animate-fadeIn":"hidden"),children:[(0,a.jsxs)("div",{className:"border-l-4 border-blue-600 pl-3 md:pl-4 mb-5 md:mb-6",children:[(0,a.jsxs)("h3",{className:"text-lg md:text-xl font-semibold",children:["Day ",e.day,": ",e.title]}),(0,a.jsx)("p",{className:"text-gray-600 mt-1 md:mt-2 text-sm md:text-base",children:e.description})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5 md:gap-6 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-700 mb-2 text-base",children:"Activities"}),e.activities&&e.activities.length>0?(0,a.jsx)("div",{className:"space-y-3",children:e.activities.map((s,t)=>(s&&"object"==typeof s||console.error("[Page ".concat(v,"] Invalid activity structure at index ").concat(t," for Day ").concat(e.day,":"),s),(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"w-16 sm:w-20 flex-shrink-0 text-xs sm:text-sm text-gray-500 pt-0.5",children:(null==s?void 0:s.time)||""}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:(null==s?void 0:s.name)||"N/A"}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:(null==s?void 0:s.duration)||""})]})]},"act-".concat(t))))}):(0,a.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No specific activities listed."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-700 mb-2 text-base",children:"Meals"}),e.meals&&e.meals.length>0?(0,a.jsx)("div",{className:"space-y-1",children:e.meals.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.Z,{size:14,className:"mr-1.5 text-green-500"}),(0,a.jsx)("span",{className:"text-sm",children:e})]},"meal-".concat(s)))}):(0,a.jsx)("p",{className:"text-sm text-gray-500 italic",children:"Meals not specified."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-700 mb-2 text-base",children:"Accommodation"}),e.accommodation&&"N/A"!==e.accommodation?(0,a.jsx)("div",{className:"text-sm",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(o.Z,{size:14,className:"mr-1.5 text-gray-500 flex-shrink-0 mt-0.5"}),(0,a.jsx)("span",{children:e.accommodation})]})}):(0,a.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No accommodation/departure day."})]})]}),e.day<U.length&&(0,a.jsx)("div",{className:"flex justify-end mt-4",children:(0,a.jsxs)("button",{onClick:()=>w(e.day+1),className:"text-blue-600 hover:text-blue-800 font-medium text-sm flex items-center",children:["Next Day ",(0,a.jsx)(x.Z,{size:16,className:"ml-1"})]})})]},e.day)))]}):(0,a.jsx)("div",{className:"text-center py-8 text-gray-500 italic",children:" Detailed day-wise itinerary is not available for this package. "})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden mb-8",children:(0,a.jsxs)("div",{className:"p-4 md:p-6",children:[(0,a.jsx)("h2",{className:"text-xl md:text-2xl font-bold mb-4",children:"Important Information"}),I.length>0&&(0,a.jsxs)("div",{className:"mb-5 md:mb-6",children:[(0,a.jsx)("h3",{className:"text-base md:text-lg font-semibold mb-2",children:"Exclusions"}),(0,a.jsx)("ul",{className:"space-y-1.5 md:space-y-2",children:I.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start",children:[(0,a.jsx)(h.Z,{size:14,className:"mr-2 text-red-500 flex-shrink-0 mt-0.5 md:mt-1"}),(0,a.jsx)("span",{className:"text-sm md:text-base",children:e})]},"excl-".concat(s)))})]}),(0,a.jsxs)("div",{className:"mb-5 md:mb-6",children:[" ",(0,a.jsx)("h3",{className:"text-base md:text-lg font-semibold mb-2",children:"Cancellation Policy"})," ",(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-sm md:text-base text-gray-700",children:[" ",(0,a.jsx)("li",{children:"Policies vary. Check details during booking."})," "]})," "]}),(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("h3",{className:"text-base md:text-lg font-semibold mb-2",children:"Additional Notes"})," ",(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-sm md:text-base text-gray-700",children:[" ",(0,a.jsx)("li",{children:"Itinerary subject to change due to weather/local conditions."})," "]})," "]})]})}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6 md:p-8 text-center",children:[(0,a.jsx)("h2",{className:"text-xl md:text-2xl font-bold mb-3 md:mb-4",children:"Ready to Explore Andaman?"}),(0,a.jsx)("p",{className:"text-gray-600 mb-5 md:mb-6 max-w-2xl mx-auto text-sm md:text-base",children:" Book this package now to secure your spot. "}),(0,a.jsx)(c.default,{href:"/packages/".concat(A.id,"/book"),className:"inline-block bg-blue-600 hover:bg-blue-700 text-white py-2.5 px-6 md:py-3 md:px-8 rounded-md transition duration-300 text-sm md:text-base",children:" Book Now "})]})]})})}function b(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)(f,{}),children:(0,a.jsx)(y,{})})}},9889:function(e,s,t){"use strict";t.d(s,{i:function(){return r},q:function(){return n}});var a=t(2265);function r(e,s){let t=(0,a.useRef)(!0);t.current&&(console.log("[useFetch] Hook initialized. URL:",e),t.current=!1);let[r,n]=(0,a.useState)({data:null,error:null,status:"idle"}),c=(0,a.useRef)(e),l=(0,a.useRef)(s);JSON.stringify(l.current)!==JSON.stringify(s)&&(l.current=s);let i=(0,a.useRef)(!0);return(0,a.useEffect)(()=>{if(console.log("[useFetch] useEffect entering. URL:",e,"Initial fetch:",i.current),c.current===e&&null!==e&&!i.current){console.log("[useFetch] useEffect skipped - URL unchanged and not first render");return}i.current=!1,c.current=e,console.log("[useFetch] useEffect triggered. URL:",e),(async()=>{if(console.log("[useFetch] fetchData started. URL:",e),!e){console.log("[useFetch] URL is null, setting state to idle/null."),n({data:null,error:null,status:"idle"});return}console.log("[useFetch] Resetting state and setting status to loading."),n({data:null,error:null,status:"loading"});try{let s;console.log("[useFetch] Attempting fetch to URL:",e);let t=e.startsWith("http")?e:"".concat(window.location.origin).concat(e);console.log("[useFetch] Full URL for fetch:",t);let a=await fetch(t,{...l.current,credentials:"include"});console.log("[useFetch] Fetch completed. URL:",e,"Status:",a.status);try{console.log("[useFetch] Attempting response.json(). URL:",e),s=await a.json(),console.log("[useFetch] response.json() successful. URL:",e)}catch(s){throw console.error("[useFetch] response.json() FAILED. URL:",e,"Error:",s),Error("Request failed with status ".concat(a.status," and non-JSON response."))}if(!a.ok){let t=(null==s?void 0:s.message)||a.statusText||"HTTP error! Status: ".concat(a.status);throw console.warn("[useFetch] Response not OK. Status:",a.status,"URL:",e,"Throwing error:",t),Error(t)}if(console.log("[useFetch] Response OK. Checking result.success. URL:",e),s.success)console.log("[useFetch] result.success is true. URL:",e),void 0!==s.data?(console.log("[useFetch] Setting state data and status=success. URL:",e),n({data:s.data,error:null,status:"success"})):(console.warn("[useFetch] Fetch successful (result.success=true) but result.data is undefined. Setting state data=null, status=success. URL: ".concat(e)),n({data:null,error:null,status:"success"}));else{let t=s.message||"API returned success: false";throw console.warn("[useFetch] result.success is false. URL:",e,"Throwing error:",t),Error(t)}}catch(t){console.error("[useFetch] CATCH block error for URL ".concat(e,":"),t);let s=t instanceof Error?t:Error("Unknown fetch error occurred");console.log("[useFetch] Setting state error and status=error. URL:",e),n({data:null,error:s,status:"error"})}})()},[e]),console.log("[useFetch] Returning state for URL:",e,{status:r.status}),{data:r.data,error:r.error,status:r.status,isLoading:"loading"===r.status}}function n(e){let s=(0,a.useRef)(!0);s.current&&(console.log("[useSubmit] Hook initialized. Initial URL:",e),s.current=!1);let[t,r]=(0,a.useState)(null),[n,c]=(0,a.useState)(null),[l,i]=(0,a.useState)("idle");return{submit:async function(s){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST",a=arguments.length>2?arguments[2]:void 0,n=a||e;if(console.log("[useSubmit] submit function called. Target URL:",n,"Method:",t),i("loading"),r(null),c(null),!n)return console.error("[useSubmit] No URL provided (initial or override). Aborting submission."),c(Error("No URL specified for submission.")),i("error"),{success:!1,error:"No URL specified for submission."};try{let e;let a={method:t,headers:{"Content-Type":"application/json",Accept:"application/json"},body:"DELETE"!==t?JSON.stringify(s):void 0,credentials:"include"};console.log("[useSubmit] Attempting fetch. URL:",n);let c=await fetch(n,a);console.log("[useSubmit] Fetch completed. URL:",n,"Status:",c.status);try{console.log("[useSubmit] Attempting response.json(). URL:",n),204===c.status||"0"===c.headers.get("content-length")?(console.log("[useSubmit] Received 204 No Content or empty body. Assuming success."),e={success:!0}):e=await c.json(),console.log("[useSubmit] response.json() successful or handled empty. URL:",n)}catch(e){throw console.error("[useSubmit] response.json() FAILED. URL:",n,"Error:",e),Error("Request failed with status ".concat(c.status," and non-JSON response."))}if(console.log("[useSubmit] Checking response.ok and result.success. URL:",n),c.ok&&(void 0===e.success||!0===e.success)){if(console.log("[useSubmit] Response OK and result.success is true/undefined. URL:",n),void 0!==e.data)return console.log("[useSubmit] Setting data and status=success. URL:",n),r(e.data),i("success"),{success:!0,data:e.data};return r(null),i("success"),console.warn("[useSubmit] Submit successful (result.success=true/undefined) but result.data is undefined. Setting data=null, status=success. URL: ".concat(n)),{success:!0,data:null}}{let s=e.message||"API Error: Status ".concat(c.status,", Success Flag: ").concat(e.success);throw console.warn("[useSubmit] Response NOT OK or result.success is false. URL:",n,"Throwing error:",s),Error(s)}}catch(s){console.error("[useSubmit] CATCH block error. URL:",n,"Error:",s);let e=s instanceof Error?s.message:"Unknown submit error occurred";return console.log("[useSubmit] Setting error state and status=error. URL:",n),c(Error(e)),i("error"),{success:!1,error:e}}},data:t,error:n,status:l,isLoading:"loading"===l,reset:()=>{console.log("[useSubmit] reset function called."),r(null),c(null),i("idle")}}}}},function(e){e.O(0,[2972,2971,2117,1744],function(){return e(e.s=7366)}),_N_E=e.O()}]);