(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1647],{3527:function(e,t,s){Promise.resolve().then(s.bind(s,1463))},6858:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},7662:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},5805:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},1463:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return C}});var a=s(7437),c=s(2265),r=s(7648),l=s(3145),i=s(5863),n=s(3639),o=s(7662),d=s(5805),m=s(2449),x=s(1723),u=s(3974),h=s(2720),p=s(3774),v=s(7746),f=s(6595),g=s(6858);let j=(0,s(9763).Z)("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);var y=s(3247),N=s(9889),b=s(3494);let _=e=>{let{text:t}=e;return(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center py-16",children:[(0,a.jsx)(i.Z,{className:"h-10 w-10 animate-spin ".concat(b.xb," mb-4")}),(0,a.jsx)("span",{className:"text-lg font-medium ".concat(b.qf),children:t})]})},w=e=>{let{message:t,onRetry:s}=e;return(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center py-16 text-center p-6 rounded-2xl ".concat(b.AD," border ").concat(b.qB),children:[(0,a.jsx)(n.Z,{className:"h-10 w-10 ".concat(b.kq," mb-4")}),(0,a.jsx)("span",{className:"text-lg font-medium ".concat(b.Mx),children:"Oops! Something went wrong."}),(0,a.jsx)("p",{className:"text-sm ".concat(b.tM," mt-2"),children:t||"Failed to load services."}),s&&(0,a.jsx)("button",{onClick:s,className:"mt-4 ".concat(b.j0),children:"Try Again"})]})},k=e=>{var t,s,i,n;let{service:j,categoryColor:y}=e,[N,_]=(0,c.useState)(!1),w=(n=null===(t=j.images)||void 0===t?void 0:t[0],N||!n||"string"!=typeof n||""===n.trim()||["null","undefined"].includes(n.toLowerCase())?"/images/placeholder_service.jpg":n.startsWith("http://")||n.startsWith("https://")?n:n.startsWith("/")?n:"/images/".concat(n)),k=j.rating||null,Z=e=>{if(e.amenities&&"string"==typeof e.amenities)try{let t=JSON.parse(e.amenities);return(null==t?void 0:t.specifics)||null}catch(e){console.error("Failed to parse amenities JSON for specifics:",e)}else if("object"==typeof e.amenities&&null!==e.amenities)return e.amenities.specifics||null;return null},S=(e=>{if(e.price_details)return e.price_details;let t=Z(e);if("transport"===e.service_category){let e=null==t?void 0:t.transport;if(null==e?void 0:e.price_per_trip)return"₹".concat(Number(e.price_per_trip).toLocaleString("en-IN")," per trip");if(null==e?void 0:e.price_per_km)return"₹".concat(Number(e.price_per_km).toLocaleString("en-IN")," per km")}else if("rental"===e.service_category){let s=null==t?void 0:t.rental;if((null==s?void 0:s.unit)&&e.price_numeric)return"₹".concat(e.price_numeric.toLocaleString("en-IN")," ").concat(s.unit)}return e.price_numeric?"₹".concat(e.price_numeric.toLocaleString("en-IN")," (approx)"):"Price on request"})(j),C="";return"transport"===j.service_category?C="/services/transport/".concat(j.id):"rental"===j.service_category?C="/services/rental/".concat(j.id):"activity"===j.service_category&&(C="/activities/".concat(j.id)),(0,a.jsxs)("div",{className:"".concat(b.JB," flex flex-col overflow-hidden p-0"),children:[" ",(0,a.jsxs)("div",{className:"h-48 w-full relative flex-shrink-0",children:[(0,a.jsx)(l.default,{src:w,alt:j.name||"Service Image",fill:!0,className:"object-cover",sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw",onError:()=>{if(!N){var e;console.log("Image failed to load, attempting placeholder:",null===(e=j.images)||void 0===e?void 0:e[0]),_(!0)}},priority:!1}),"/images/placeholder_service.jpg"===w&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80 pointer-events-none",children:(0,a.jsx)(u.Z,{size:32,className:"".concat(b.xb," opacity-60")})}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/30 to-transparent"})," ",(0,a.jsxs)("div",{style:{backgroundColor:y},className:"absolute top-3 right-3 text-white text-xs font-semibold py-1 px-2.5 rounded-full shadow-md flex items-center",children:["transport"===j.service_category?(0,a.jsx)(o.Z,{size:12,className:"mr-1"}):"rental"===j.service_category?(0,a.jsx)(m.Z,{size:12,className:"mr-1"}):(0,a.jsx)(h.Z,{size:12,className:"mr-1"}),(j.type||"").replace(/^(transport_|rental_|activity_)/,"").replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())]})]}),(0,a.jsxs)("div",{className:"p-4 flex flex-col flex-grow",children:[" ",(0,a.jsx)("h3",{className:"text-md font-semibold leading-tight ".concat(b.qf," line-clamp-2 mb-1"),children:j.name}),(0,a.jsxs)("div",{className:"flex items-center text-xs ".concat(b.tM," mb-2"),children:[(0,a.jsx)(p.Z,{size:12,className:"mr-1 flex-shrink-0 ".concat(b.xb)}),(0,a.jsx)("span",{children:j.island_name}),(null===(s=j.provider)||void 0===s?void 0:s.business_name)&&(0,a.jsx)("span",{className:"mx-1.5 text-gray-300",children:"|"}),(null===(i=j.provider)||void 0===i?void 0:i.business_name)&&(0,a.jsxs)("span",{className:"line-clamp-1 ".concat(b.tM),children:["By: ",j.provider.business_name]})]}),(()=>{let e=Z(j),t="mr-1 flex-shrink-0 ".concat(b.xb);if("transport"===j.service_category){let s=null==e?void 0:e.transport;return(0,a.jsxs)("div",{className:"flex items-center text-xs ".concat(b.tM," mb-2 gap-x-3"),children:[(null==s?void 0:s.vehicle_type)&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.Z,{size:12,className:t})," ",(0,a.jsx)("span",{children:s.vehicle_type})]}),(null==s?void 0:s.capacity_passengers)&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.Z,{size:12,className:t})," ",(0,a.jsxs)("span",{children:[s.capacity_passengers," passengers"]})]})]})}if("rental"===j.service_category){let s=null==e?void 0:e.rental;return(0,a.jsxs)("div",{className:"flex items-center text-xs ".concat(b.tM," mb-2 gap-x-3"),children:[j.item_type&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.Z,{size:12,className:t})," ",(0,a.jsx)("span",{children:j.item_type})]}),(null==s?void 0:s.unit)&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.Z,{size:12,className:t})," ",(0,a.jsx)("span",{children:s.unit})]})]})}return null})(),(0,a.jsx)("p",{className:"".concat(b.tM," text-xs mb-3 line-clamp-2 flex-grow"),children:j.description||"Reliable service for your travel needs."}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center font-semibold ".concat(b.qf),children:[" ",(0,a.jsx)(v.Z,{size:14,className:"mr-0.5"})," ",S]}),null!==k&&(0,a.jsxs)("div",{className:"flex items-center text-yellow-500",children:[" ",(0,a.jsx)(f.Z,{size:14,fill:"currentColor",className:"text-yellow-400"}),(0,a.jsx)("span",{className:"ml-1 font-medium ".concat(b.qf),children:k.toFixed(1)})]})]}),C&&(0,a.jsxs)(r.default,{href:C,className:"mt-auto block w-full text-center ".concat(b.zi," text-sm py-2.5"),children:["View Details ",(0,a.jsx)(g.Z,{size:14,className:"ml-1 inline-block"})]})]})]})};function Z(){let[e,t]=(0,c.useState)({search:"",islandId:""}),[s,r]=(0,c.useState)(e),[l,i]=(0,c.useState)(0);(0,c.useEffect)(()=>{let t=setTimeout(()=>r(e),500);return()=>clearTimeout(t)},[e]);let n=(0,c.useCallback)(()=>{let e=new URLSearchParams;return e.append("category","transport,rental,activity"),s.search&&e.append("search",s.search),s.islandId&&e.append("islandId",s.islandId),"/api/services-main?".concat(e.toString()).concat(l?"&_cacheBust=".concat(l):"")},[s,l]),{data:d,error:x,status:u}=(0,N.i)(n());console.log("\uD83D\uDD0D ServicesMainPage: Raw API response:",d);let p=(0,c.useCallback)(()=>{i(e=>e+1)},[]),v=[];d&&(v=(Array.isArray(d)?d:d.data||[]).map(e=>{if(!e.service_category){var t,s,a;if(null===(t=e.type)||void 0===t?void 0:t.startsWith("transport"))return{...e,service_category:"transport"};if(null===(s=e.type)||void 0===s?void 0:s.startsWith("rental"))return{...e,service_category:"rental"};if(null===(a=e.type)||void 0===a?void 0:a.startsWith("activity"))return{...e,service_category:"activity"}}return e})),console.log("\uD83D\uDD0D ServicesMainPage: Processed ".concat(v.length," services."));let f="loading"===u,g="error"===u?x:null,Z=v.filter(e=>(null==e?void 0:e.service_category)==="transport"),C=v.filter(e=>(null==e?void 0:e.service_category)==="rental"),M=v.filter(e=>(null==e?void 0:e.service_category)==="activity"),q=e=>{t(t=>({...t,[e.target.name]:e.target.value}))},I=(e,t,s,r)=>(0,a.jsxs)("section",{className:"mb-12",children:[(0,a.jsxs)("div",{className:"flex items-center mb-6",children:[c.createElement(s,{size:28,className:"mr-3 ".concat(b.xb)})," ",(0,a.jsx)("h2",{className:"text-2xl font-bold ".concat(b.qf),children:e})," "]}),f&&0===t.length&&(0,a.jsx)(_,{text:"Loading ".concat(e.toLowerCase(),"...")})," ",g&&!f&&0===t.length&&(0,a.jsx)(w,{message:"Could not load ".concat(e.toLowerCase(),". ").concat(g.message),onRetry:p}),!f&&!g&&0===t.length&&(0,a.jsx)("div",{className:"bg-white rounded-lg p-8 text-center shadow-sm border ".concat(b.J),children:(0,a.jsxs)("p",{className:"".concat(b.tM),children:["No ",e.toLowerCase()," found matching your criteria."]})}),!f&&!g&&t.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5",children:t.map(e=>(0,a.jsx)(k,{service:e,categoryColor:r},"".concat(e.service_category,"-").concat(e.id)))})]});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"".concat(b.Cx," border-b ").concat(b.J),children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-16 md:py-24 text-center",children:[(0,a.jsx)("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold ".concat(b.qf," mb-4"),children:"Services & Activities"}),(0,a.jsx)("p",{className:"text-lg sm:text-xl ".concat(b.tM," max-w-2xl mx-auto"),children:"Discover reliable transport, convenient rentals, and exciting activities for your perfect Andaman adventure."})]})}),(0,a.jsx)("div",{className:"bg-white py-10 md:py-12",children:(0,a.jsxs)("div",{className:"container mx-auto px-4",children:[f&&0===v.length&&(0,a.jsx)("div",{className:"text-center mb-8",children:(0,a.jsx)(_,{text:"Loading all services..."})}),g&&!f&&0===v.length&&(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(w,{message:"Failed to load services. ".concat(g.message),onRetry:p})}),(0,a.jsxs)("div",{className:"".concat(b.JB," p-5 md:p-6 mb-10"),children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(j,{size:20,className:"mr-2 ".concat(b.xb)}),(0,a.jsx)("h3",{className:"text-lg font-semibold ".concat(b.qf),children:"Filter Services"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 items-end",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"search",className:"block text-xs font-medium ".concat(b.tM," mb-1"),children:"Search by Name"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(y.Z,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 ".concat(b.xb," opacity-70")}),(0,a.jsx)("input",{type:"text",id:"search",name:"search",value:e.search,onChange:q,placeholder:"e.g., Airport Cab, Scooter Rental",className:"w-full pl-8 pr-3 py-2 border ".concat(b.qc," rounded-md shadow-sm focus:ring-2 focus:ring-[").concat(b.o5,"] focus:border-[").concat(b.o5,"] text-sm ").concat(b.qf," placeholder-").concat(b.tM)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"islandId",className:"block text-xs font-medium ".concat(b.tM," mb-1"),children:"Island"}),(0,a.jsx)("select",{id:"islandId",name:"islandId",value:e.islandId,onChange:q,className:"w-full py-2 px-3 border ".concat(b.qc," bg-white rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-[").concat(b.o5,"] focus:border-[").concat(b.o5,"] text-sm ").concat(b.qf),children:[{value:"",label:"All Islands"},{value:"1",label:"Havelock Island (Swaraj Dweep)"},{value:"2",label:"Neil Island (Shaheed Dweep)"},{value:"3",label:"Port Blair"}].map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})]}),!f&&!g&&0===v.length&&S()&&(0,a.jsxs)("div",{className:"text-center py-10 bg-white rounded-xl shadow-md border ".concat(b.J," mb-8"),children:[(0,a.jsx)("p",{className:"text-lg ".concat(b.qf),children:"No services found matching your search criteria."}),(0,a.jsx)("button",{onClick:()=>t({search:"",islandId:""}),className:"mt-4 ".concat(b.j0),children:"Clear Filters"})]}),(!f||v.length>0)&&(0,a.jsxs)(a.Fragment,{children:[I("Transport Services",Z,o.Z,"#3B82F6"),I("Rental Services",C,m.Z,"#F59E0B"),I("Activity Services",M,h.Z,"#EC4899")]})]})})]})}let S=e=>!!e&&(""!==e.search||""!==e.islandId);function C(){return(0,a.jsx)(Z,{})}}},function(e){e.O(0,[2972,3847,3855,2971,2117,1744],function(){return e(e.s=3527)}),_N_E=e.O()}]);