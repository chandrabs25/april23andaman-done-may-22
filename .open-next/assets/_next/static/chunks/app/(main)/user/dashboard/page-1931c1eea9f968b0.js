(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5012],{2341:function(e,s,t){Promise.resolve().then(t.bind(t,519))},3639:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},5863:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},4794:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},6595:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},5805:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},7648:function(e,s,t){"use strict";t.d(s,{default:function(){return n.a}});var a=t(2972),n=t.n(a)},9376:function(e,s,t){"use strict";var a=t(5475);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},519:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return y},dynamic:function(){return f}});var a=t(7437),n=t(2265),i=t(7648),l=t(5863),r=t(3639),d=t(1047),c=t(5805),o=t(8226),m=t(4794),x=t(6595);let u=(0,t(9763).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);var h=t(4603),g=t(9889);let f="force-dynamic",p=e=>{let{text:s="Loading..."}=e;return(0,a.jsxs)("div",{className:"flex justify-center items-center py-10",children:[(0,a.jsx)(l.Z,{className:"h-6 w-6 animate-spin text-blue-600 mr-2"}),(0,a.jsx)("span",{children:s})]})},b=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},j=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch(s){return e}};function N(){let[e,s]=(0,n.useState)("bookings"),{user:t,isLoading:l,isAuthenticated:f}=(0,h.a)(),{data:N,error:y,status:v}=(0,g.i)(f?"/api/bookings?limit=3":null),w=(null==N?void 0:N.bookings)||[],[k,P]=(0,n.useState)([]),[Z,S]=(0,n.useState)([]),[_,C]=(0,n.useState)([]),M={totalBookings:w.length,confirmedBookings:w.filter(e=>"confirmed"===e.status).length,pendingBookings:w.filter(e=>"pending"===e.status).length,wishlistCount:k.length,reviewsCount:Z.length,unreadNotifications:_.filter(e=>!e.read).length};if(l||f&&"loading"===v)return(0,a.jsx)(p,{text:"Loading dashboard..."});if(!f)return(0,a.jsxs)("div",{className:"text-center py-20",children:["Please ",(0,a.jsx)(i.default,{href:"/auth/signin",className:"text-blue-600 hover:underline",children:"sign in"})," to view your dashboard."]});let A=(null==t?void 0:t.first_name)?"".concat(t.first_name," ").concat(t.last_name||"").trim():(null==t?void 0:t.email)||"User";return j(null==t?void 0:t.joinDate),(0,a.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,a.jsx)("div",{className:"bg-blue-600 text-white py-8",children:(0,a.jsxs)("div",{className:"container mx-auto px-4",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"My Dashboard"}),(0,a.jsx)("p",{className:"mt-2",children:"Manage your bookings, wishlist, and account settings"})]})}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4 md:mb-0",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mr-4",children:(0,a.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:A.charAt(0).toUpperCase()})}),(0,a.jsx)("div",{children:(0,a.jsx)("h2",{className:"text-xl font-semibold",children:A})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 sm:gap-4",children:[(0,a.jsx)(i.default,{href:"/user/edit-profile",className:"text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-md transition duration-300",children:" Edit Profile "}),(0,a.jsx)(i.default,{href:"/packages",className:"text-sm bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition duration-300",children:" Browse Packages "})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[" ",(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Recent Bookings"})," ",(0,a.jsx)("p",{className:"text-2xl sm:text-3xl font-bold",children:M.totalBookings})," ",(0,a.jsxs)("p",{className:"mt-1 text-xs text-gray-600",children:[" ",M.confirmedBookings," confirmed, ",M.pendingBookings," pending "]})," "]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[" ",(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Wishlist"})," ",(0,a.jsx)("p",{className:"text-2xl sm:text-3xl font-bold",children:M.wishlistCount})," ",(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-600",children:" Saved packages "})," "]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[" ",(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Reviews"})," ",(0,a.jsx)("p",{className:"text-2xl sm:text-3xl font-bold",children:M.reviewsCount})," ",(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-600",children:" Reviews submitted "})," "]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[" ",(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Notifications"})," ",(0,a.jsx)("p",{className:"text-2xl sm:text-3xl font-bold",children:M.unreadNotifications})," ",(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-600",children:" Unread notifications "})," "]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden mb-8",children:[(0,a.jsx)("div",{className:"flex border-b overflow-x-auto",children:["bookings","wishlist","reviews","notifications","account"].map(t=>(0,a.jsx)("button",{onClick:()=>s(t),className:"px-4 sm:px-6 py-3 font-medium text-sm whitespace-nowrap ".concat(e===t?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-blue-600"),children:t.charAt(0).toUpperCase()+t.slice(1)},t))}),(0,a.jsxs)("div",{className:"p-6 min-h-[200px]",children:[" ","bookings"===e&&(0,a.jsxs)("div",{children:["loading"===v&&(0,a.jsx)(p,{text:"Loading bookings..."}),"error"===v&&(0,a.jsxs)("div",{className:"text-center py-8 text-red-600",children:[" ",(0,a.jsx)(r.Z,{className:"inline-block mr-2",size:18})," Could not load bookings: ",null==y?void 0:y.message]}),"success"===v&&w.length>0?(0,a.jsxs)("div",{className:"space-y-4",children:[w.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4 hover:shadow-sm transition-shadow",children:[(0,a.jsxs)("div",{className:"flex flex-wrap justify-between items-center mb-2 gap-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-base",children:e.packageName||e.package||"Booking #".concat(e.id)}),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold ".concat(b(e.status)),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 grid grid-cols-2 sm:grid-cols-4 gap-2",children:[(0,a.jsxs)("div",{title:"Dates",children:[(0,a.jsx)(d.Z,{size:14,className:"inline mr-1"})," ",j(e.start_date)," - ",j(e.end_date)]}),(0,a.jsxs)("div",{title:"Guests",children:[(0,a.jsx)(c.Z,{size:14,className:"inline mr-1"})," ",e.total_people," People"]}),(0,a.jsxs)("div",{title:"Amount",children:[(0,a.jsx)(o.Z,{size:14,className:"inline mr-1"})," ₹",e.total_amount.toLocaleString("en-IN")]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)(i.default,{href:"/user/bookings/".concat(e.id),className:"text-blue-600 hover:underline",children:" View Details "})})]})]},e.id)),(0,a.jsx)("div",{className:"text-center mt-6",children:(0,a.jsx)(i.default,{href:"/user/bookings",className:"text-blue-600 hover:underline font-medium text-sm",children:"View All Bookings →"})})]}):"success"===v&&0===w.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[" You have no recent bookings. ",(0,a.jsx)(i.default,{href:"/packages",className:"text-blue-600 hover:underline",children:"Explore packages?"})," "]}):null]}),"wishlist"===e&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(m.Z,{size:24,className:"mx-auto mb-2"})," Wishlist feature coming soon!"]}),"reviews"===e&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(x.Z,{size:24,className:"mx-auto mb-2"})," Your reviews feature coming soon!"]}),"notifications"===e&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(u,{size:24,className:"mx-auto mb-2"})," Notifications feature coming soon!"]}),"account"===e&&(0,a.jsxs)("div",{className:"max-w-xl",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Personal Information"}),(0,a.jsxs)("div",{className:"mb-4",children:[" ",(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Name"})," ",(0,a.jsx)("input",{type:"text",value:A,readOnly:!0,className:"w-full p-2 border rounded bg-gray-100 mt-1 text-sm"})," "]}),(0,a.jsxs)("div",{className:"mb-4",children:[" ",(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Email"})," ",(0,a.jsx)("input",{type:"email",value:(null==t?void 0:t.email)||"",readOnly:!0,className:"w-full p-2 border rounded bg-gray-100 mt-1 text-sm"})," "]}),(null==t?void 0:t.phone)&&(0,a.jsxs)("div",{className:"mb-4",children:[" ",(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Phone"})," ",(0,a.jsx)("input",{type:"tel",value:t.phone,readOnly:!0,className:"w-full p-2 border rounded bg-gray-100 mt-1 text-sm"})," "]}),(0,a.jsxs)("div",{className:"flex justify-end mb-6",children:[" ",(0,a.jsx)(i.default,{href:"/user/edit-profile",className:"bg-blue-600 text-white px-4 py-2 rounded-md text-sm hover:bg-blue-700",children:" Edit Profile "})," "]}),(0,a.jsx)("hr",{className:"my-6"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Account Security"}),(0,a.jsxs)("div",{className:"mb-4",children:[" ",(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Password"})," ",(0,a.jsx)("input",{type:"password",value:"••••••••",readOnly:!0,className:"w-full p-2 border rounded bg-gray-100 mt-1 text-sm"})," "]}),(0,a.jsxs)("div",{className:"flex justify-end",children:[" ",(0,a.jsx)(i.default,{href:"/user/change-password",className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md text-sm hover:bg-gray-300",children:" Change Password "})," "]})]})]})]})]})]})}function y(){return(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)(p,{text:"Loading dashboard..."}),children:(0,a.jsx)(N,{})})}}},function(e){e.O(0,[2972,285,2971,2117,1744],function(){return e(e.s=2341)}),_N_E=e.O()}]);