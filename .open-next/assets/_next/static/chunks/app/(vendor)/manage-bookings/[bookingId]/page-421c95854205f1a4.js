(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9436],{99541:function(e,s,t){Promise.resolve().then(t.bind(t,82241))},39763:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var r=t(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,s)=>{let t=(0,r.forwardRef)((t,l)=>{let{color:c="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:u,className:d="",children:m,...g}=t;return(0,r.createElement)("svg",{ref:l,...a,width:o,height:o,stroke:c,strokeWidth:u?24*Number(i)/Number(o):i,className:["lucide","lucide-".concat(n(e)),d].join(" "),...g},[...s.map(e=>{let[s,t]=e;return(0,r.createElement)(s,t)}),...Array.isArray(m)?m:[m]])});return t.displayName="".concat(e),t}},63639:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(39763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},32660:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(39763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},31047:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(39763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},91723:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(39763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},48736:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(39763).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},89345:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(39763).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},13041:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(39763).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},92369:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(39763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},95805:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(39763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},99376:function(e,s,t){"use strict";var r=t(35475);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},82241:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return b},dynamic:function(){return f}});var r=t(57437);t(2265);var a=t(99376),n=t(63639),l=t(32660),c=t(31047),o=t(95805),i=t(91723),u=t(92369),d=t(89345),m=t(13041),g=t(48736),h=t(29889),x=t(84603);let f="force-dynamic",p=e=>{let{message:s="Loading..."}=e;return(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:s})]})})},y=e=>{let{status:s,type:t="booking"}=e,a=((e,s)=>{if("payment"===s)switch(null==e?void 0:e.toUpperCase()){case"PAID":return"bg-green-100 text-green-800 border-green-200";case"PENDING_PAYMENT":case"PENDING":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"FAILED":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}switch(null==e?void 0:e.toUpperCase()){case"CONFIRMED":return"bg-green-100 text-green-800 border-green-200";case"PENDING":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"COMPLETED":return"bg-blue-100 text-blue-800 border-blue-200";case"CANCELLED":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(s,t);return(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ".concat(a),children:null==s?void 0:s.toUpperCase()})};function b(e){var s,t;let{params:f}=e,b=(0,a.useRouter)(),{user:j,isLoading:N}=(0,x.a)(),v=parseInt(f.bookingId),{data:w,error:k,status:L}=(0,h.i)(v&&!isNaN(v)?"/api/bookings/".concat(v):null),R=e=>{try{return new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(e){return"Invalid Date"}},S=e=>{try{return new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return"Invalid Date"}};return N?(0,r.jsx)(p,{message:"Authenticating..."}):(null==j?void 0:j.id)?isNaN(v)?(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(n.Z,{className:"h-5 w-5 text-red-400"}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Invalid Booking ID"}),(0,r.jsx)("p",{className:"text-sm text-red-700 mt-1",children:"The booking ID provided is not valid."})]})]})})}):(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,r.jsxs)("button",{onClick:()=>b.back(),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,r.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"Back to Bookings"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Booking Details"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Booking ID: #",v]})]})]}),"loading"===L&&(0,r.jsx)(p,{message:"Loading booking details..."}),"error"===L&&(0,r.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(n.Z,{className:"h-5 w-5 text-red-400"}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error Loading Booking"}),(0,r.jsx)("p",{className:"text-sm text-red-700 mt-1",children:(null==k?void 0:k.message)||"Failed to load booking details"})]})]})}),"success"===L&&w&&(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white shadow-sm border border-gray-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:w.package_name||"Service Booking"}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(y,{status:w.status,type:"booking"}),(0,r.jsx)(y,{status:w.payment_status,type:"payment"})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Total Amount"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["â‚¹",null===(s=w.total_amount)||void 0===s?void 0:s.toLocaleString("en-IN")]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)(c.Z,{className:"h-5 w-5 text-blue-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Start Date"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:R(w.start_date)})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)(c.Z,{className:"h-5 w-5 text-blue-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"End Date"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:R(w.end_date)})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(o.Z,{className:"h-5 w-5 text-gray-400"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Total Guests"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[w.total_people," people"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(i.Z,{className:"h-5 w-5 text-gray-400"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Duration"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[((e,s)=>{try{let t=new Date(e),r=new Date(s),a=Math.abs(r.getTime()-t.getTime());return Math.ceil(a/864e5)}catch(e){return 0}})(w.start_date,w.end_date)," days"]})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white shadow-sm border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Customer Information"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(u.Z,{className:"h-5 w-5 text-gray-400"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Name"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:w.guest_name||(w.user_first_name&&w.user_last_name?"".concat(w.user_first_name," ").concat(w.user_last_name):"N/A")})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(d.Z,{className:"h-5 w-5 text-gray-400"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Email"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:w.guest_email||w.user_email||"N/A"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(m.Z,{className:"h-5 w-5 text-gray-400"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Phone"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:w.guest_phone||w.user_phone||"N/A"})]})]})]})]}),w.special_requests&&(0,r.jsxs)("div",{className:"bg-white shadow-sm border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Special Requests"}),(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)(g.Z,{className:"h-5 w-5 text-gray-400 mt-0.5"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:w.special_requests})]})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white shadow-sm border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Booking Timeline"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-2 h-2 bg-blue-600 rounded-full mt-2"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Booking Created"}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:S(w.created_at)})]})]}),w.updated_at!==w.created_at&&(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-2 h-2 bg-gray-400 rounded-full mt-2"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Last Updated"}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:S(w.updated_at)})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white shadow-sm border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Information"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Status"}),(0,r.jsx)(y,{status:w.payment_status,type:"payment"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Total Amount"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["â‚¹",null===(t=w.total_amount)||void 0===t?void 0:t.toLocaleString("en-IN")]})]}),w.payment_details&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Payment Details"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 font-mono bg-gray-50 p-2 rounded",children:w.payment_details})]})]})]}),(0,r.jsxs)("div",{className:"bg-white shadow-sm border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("button",{className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md",children:"Download Invoice"}),(0,r.jsx)("button",{className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md",children:"Send Email to Customer"}),(0,r.jsx)("button",{className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md",children:"View Related Services"})]})]})]})]})]}):(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsx)("p",{className:"text-red-600",children:"Authentication required"})})}},84603:function(e,s,t){"use strict";t.d(s,{H:function(){return c},a:function(){return o}});var r=t(57437),a=t(2265),n=t(99376);let l=(0,a.createContext)(void 0),c=e=>{let{children:s}=e,[t,c]=(0,a.useState)(null),[o,i]=(0,a.useState)(!0),u=(0,n.useRouter)(),d=(0,a.useCallback)(async()=>{try{console.log("Checking auth state via /api/auth/me...");let e=await fetch("/api/auth/me",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"}),s=await e.json();e.ok&&s.success&&s.data?(console.log("Auth check successful, user found:",s.data),c(s.data)):(console.log("Auth check failed or no user session found."),c(null))}catch(e){console.error("Error checking auth state:",e),c(null)}finally{i(!1)}},[]);(0,a.useEffect)(()=>{i(!0),d()},[d]);let m=(0,a.useCallback)(async(e,s)=>{i(!0);try{console.log("Attempting login with:",e);let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:s}),credentials:"include"}),r=await t.json();if(t.ok&&r.success&&r.data)return console.log("Login successful:",r.data),c(r.data),i(!1),{success:!0,user:r.data};return console.error("Login API failed:",r.message),c(null),i(!1),{success:!1,user:null}}catch(e){return console.error("Login fetch error:",e),c(null),i(!1),{success:!1,user:null}}},[]),g=(0,a.useCallback)(async(e,s,t)=>{i(!0);try{console.log("Attempting registration for:",s);let r=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:s,password:t})}),a=await r.json();if(r.ok&&a.success)return console.log("Registration successful",a.message),i(!1),{success:!0,message:a.message||"Registration successful!"};return console.error("Registration API failed:",a.message),i(!1),{success:!1,message:a.message||"Registration failed."}}catch(e){return console.error("Registration fetch error:",e),i(!1),{success:!1,message:"An unexpected error occurred."}}},[]),h=(0,a.useCallback)(async()=>{try{console.log("Logging out..."),await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(e){console.error("Logout API call failed:",e)}finally{c(null),console.log("Redirecting to signin page after logout."),u.push("/auth/signin")}},[u]);return(0,r.jsx)(l.Provider,{value:{user:t,isAuthenticated:!!t,isLoading:o,login:m,register:g,logout:h,checkAuthState:d},children:s})},o=()=>{let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},29889:function(e,s,t){"use strict";t.d(s,{i:function(){return a},q:function(){return n}});var r=t(2265);function a(e,s){let t=(0,r.useRef)(!0);t.current&&(console.log("[useFetch] Hook initialized. URL:",e),t.current=!1);let[a,n]=(0,r.useState)({data:null,error:null,status:"idle"}),l=(0,r.useRef)(e),c=(0,r.useRef)(s);JSON.stringify(c.current)!==JSON.stringify(s)&&(c.current=s);let o=(0,r.useRef)(!0);return(0,r.useEffect)(()=>{if(console.log("[useFetch] useEffect entering. URL:",e,"Initial fetch:",o.current),l.current===e&&null!==e&&!o.current){console.log("[useFetch] useEffect skipped - URL unchanged and not first render");return}o.current=!1,l.current=e,console.log("[useFetch] useEffect triggered. URL:",e),(async()=>{if(console.log("[useFetch] fetchData started. URL:",e),!e){console.log("[useFetch] URL is null, setting state to idle/null."),n({data:null,error:null,status:"idle"});return}console.log("[useFetch] Resetting state and setting status to loading."),n({data:null,error:null,status:"loading"});try{let s;console.log("[useFetch] Attempting fetch to URL:",e);let t=e.startsWith("http")?e:"".concat(window.location.origin).concat(e);console.log("[useFetch] Full URL for fetch:",t);let r=await fetch(t,{...c.current,credentials:"include"});console.log("[useFetch] Fetch completed. URL:",e,"Status:",r.status);try{console.log("[useFetch] Attempting response.json(). URL:",e),s=await r.json(),console.log("[useFetch] response.json() successful. URL:",e)}catch(s){throw console.error("[useFetch] response.json() FAILED. URL:",e,"Error:",s),Error("Request failed with status ".concat(r.status," and non-JSON response."))}if(!r.ok){let t=(null==s?void 0:s.message)||r.statusText||"HTTP error! Status: ".concat(r.status);throw console.warn("[useFetch] Response not OK. Status:",r.status,"URL:",e,"Throwing error:",t),Error(t)}if(console.log("[useFetch] Response OK. Checking result.success. URL:",e),s.success)console.log("[useFetch] result.success is true. URL:",e),void 0!==s.data?(console.log("[useFetch] Setting state data and status=success. URL:",e),n({data:s.data,error:null,status:"success"})):(console.warn("[useFetch] Fetch successful (result.success=true) but result.data is undefined. Setting state data=null, status=success. URL: ".concat(e)),n({data:null,error:null,status:"success"}));else{let t=s.message||"API returned success: false";throw console.warn("[useFetch] result.success is false. URL:",e,"Throwing error:",t),Error(t)}}catch(t){console.error("[useFetch] CATCH block error for URL ".concat(e,":"),t);let s=t instanceof Error?t:Error("Unknown fetch error occurred");console.log("[useFetch] Setting state error and status=error. URL:",e),n({data:null,error:s,status:"error"})}})()},[e]),console.log("[useFetch] Returning state for URL:",e,{status:a.status}),{data:a.data,error:a.error,status:a.status,isLoading:"loading"===a.status}}function n(e){let s=(0,r.useRef)(!0);s.current&&(console.log("[useSubmit] Hook initialized. Initial URL:",e),s.current=!1);let[t,a]=(0,r.useState)(null),[n,l]=(0,r.useState)(null),[c,o]=(0,r.useState)("idle");return{submit:async function(s){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST",r=arguments.length>2?arguments[2]:void 0,n=r||e;if(console.log("[useSubmit] submit function called. Target URL:",n,"Method:",t),o("loading"),a(null),l(null),!n)return console.error("[useSubmit] No URL provided (initial or override). Aborting submission."),l(Error("No URL specified for submission.")),o("error"),{success:!1,error:"No URL specified for submission."};try{let e;let r={method:t,headers:{"Content-Type":"application/json",Accept:"application/json"},body:"DELETE"!==t?JSON.stringify(s):void 0,credentials:"include"};console.log("[useSubmit] Attempting fetch. URL:",n);let l=await fetch(n,r);console.log("[useSubmit] Fetch completed. URL:",n,"Status:",l.status);try{console.log("[useSubmit] Attempting response.json(). URL:",n),204===l.status||"0"===l.headers.get("content-length")?(console.log("[useSubmit] Received 204 No Content or empty body. Assuming success."),e={success:!0}):e=await l.json(),console.log("[useSubmit] response.json() successful or handled empty. URL:",n)}catch(e){throw console.error("[useSubmit] response.json() FAILED. URL:",n,"Error:",e),Error("Request failed with status ".concat(l.status," and non-JSON response."))}if(console.log("[useSubmit] Checking response.ok and result.success. URL:",n),l.ok&&(void 0===e.success||!0===e.success)){if(console.log("[useSubmit] Response OK and result.success is true/undefined. URL:",n),void 0!==e.data)return console.log("[useSubmit] Setting data and status=success. URL:",n),a(e.data),o("success"),{success:!0,data:e.data};return a(null),o("success"),console.warn("[useSubmit] Submit successful (result.success=true/undefined) but result.data is undefined. Setting data=null, status=success. URL: ".concat(n)),{success:!0,data:null}}{let s=e.message||"API Error: Status ".concat(l.status,", Success Flag: ").concat(e.success);throw console.warn("[useSubmit] Response NOT OK or result.success is false. URL:",n,"Throwing error:",s),Error(s)}}catch(s){console.error("[useSubmit] CATCH block error. URL:",n,"Error:",s);let e=s instanceof Error?s.message:"Unknown submit error occurred";return console.log("[useSubmit] Setting error state and status=error. URL:",n),l(Error(e)),o("error"),{success:!1,error:e}}},data:t,error:n,status:c,isLoading:"loading"===c,reset:()=>{console.log("[useSubmit] reset function called."),a(null),l(null),o("idle")}}}}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=99541)}),_N_E=e.O()}]);