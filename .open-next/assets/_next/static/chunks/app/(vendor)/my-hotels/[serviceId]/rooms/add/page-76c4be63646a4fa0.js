(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5956],{124:function(e,s,a){Promise.resolve().then(a.bind(a,3139))},3639:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},7920:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9763).Z)("BedDouble",[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]])},3139:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return j},dynamic:function(){return p}});var t=a(7437),i=a(2265),r=a(9376),l=a(4603),n=a(9889),o=a(3340),d=a(5863),m=a(3639),c=a(7920),u=a(7648),x=a(3500),h=a(1079);let p="force-dynamic",g=[{label:"Wi-Fi",value:"wifi"},{label:"Air Conditioning",value:"ac"},{label:"Heating",value:"heating"},{label:"Television",value:"tv"},{label:"Mini Bar",value:"minibar"},{label:"Coffee/Tea Maker",value:"coffee_maker"},{label:"Hair Dryer",value:"hair_dryer"},{label:"Iron & Board",value:"iron"},{label:"Balcony/Patio",value:"balcony"},{label:"Ensuite Bathroom",value:"ensuite"},{label:"Work Desk",value:"desk"},{label:"Safe",value:"safe"}],f=e=>{let{text:s="Loading..."}=e;return(0,t.jsxs)("div",{className:"flex justify-center items-center py-10",children:[(0,t.jsx)(d.Z,{className:"h-6 w-6 animate-spin text-blue-600 mr-2"}),(0,t.jsx)("span",{children:s})]})},b=()=>(0,t.jsxs)("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded-md shadow-md max-w-2xl mx-auto my-6",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(m.Z,{className:"h-5 w-5 mr-3"}),(0,t.jsx)("h3",{className:"font-semibold",children:"Verification Pending"})]}),(0,t.jsx)("p",{className:"mt-2 text-sm",children:"Your vendor profile is awaiting verification. You cannot manage services until verified."})]}),y=()=>(0,t.jsxs)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md shadow-md max-w-2xl mx-auto my-6",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(m.Z,{className:"h-5 w-5 mr-3"}),(0,t.jsx)("h3",{className:"font-semibold",children:"Incorrect Vendor Type"})]}),(0,t.jsx)("p",{className:"mt-2 text-sm",children:"This section is for Hotel vendors only."})]});function v(){let e=(0,r.useRouter)(),s=(0,r.useParams)().serviceId,{user:a,isLoading:m,isAuthenticated:p}=(0,l.a)(),[v,j]=(0,i.useState)({room_type_name:"",base_price:"",max_guests:"",quantity_available:"",amenities:[],images:[]}),[N,_]=(0,i.useState)(!1),w=(null==a?void 0:a.id)?"/api/vendors/profile?userId=".concat(a.id):null,{data:k,error:R,status:A}=(0,n.i)(w),I=(null==k?void 0:k.verified)===1,T=(null==k?void 0:k.type)==="hotel",C="success"===A&&k&&I&&T&&!!s,q=C?"/api/vendor/my-hotels/".concat(s):null,{data:E,error:S,status:F}=(0,n.i)(q),M=(null==E?void 0:E.name)||"Hotel ".concat(s);(0,i.useEffect)(()=>{m||p&&(null==a?void 0:a.role_id)===3||e.replace("/auth/signin?reason=unauthorized_vendor")},[m,p,a,e]);let Z=m||"loading"===A||C&&"loading"===F;if(Z)return(0,t.jsx)(f,{text:"Loading Add Room Form..."});if("error"===A||"success"===A&&!k)return(0,t.jsx)("div",{className:"text-red-600",children:"Error loading vendor profile or profile not found."});if(!I)return(0,t.jsx)(b,{});if(!T)return(0,t.jsx)(y,{});if("error"===F||"success"===F&&!E)return(0,t.jsxs)("div",{className:"text-red-600",children:["Error loading hotel details: ",(null==S?void 0:S.message)||"Hotel not found or permission denied.",(0,t.jsx)("br",{}),(0,t.jsx)(u.default,{href:"/my-hotels",className:"text-sm text-blue-600 hover:underline mt-2 inline-block",children:"Return to Hotel List"})]});let P=e=>{let{name:s,value:a}=e.target;j(e=>({...e,[s]:a}))},B=async a=>{if(a.preventDefault(),_(!0),!v.room_type_name||!v.base_price||!v.max_guests||isNaN(parseFloat(v.base_price))||0>=parseFloat(v.base_price)||isNaN(parseInt(v.max_guests,10))||0>=parseInt(v.max_guests,10)){(0,o.Am)({variant:"destructive",title:"Validation Error",description:"Please fill Room Type Name, Base Price, and Max Guests with valid numbers."}),_(!1);return}let t=v.quantity_available,i=parseInt(t,10),r=!t||""===t.trim()||isNaN(i)?null:i,l={room_type_name:v.room_type_name,base_price:parseFloat(v.base_price),max_guests:parseInt(v.max_guests,10),quantity_available:r,amenities:JSON.stringify(v.amenities||[]),images:v.images&&v.images.length>0?v.images.join(","):null};try{let a=await fetch("/api/vendor/my-hotels/".concat(s,"/rooms"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),t=await a.json();if(!a.ok||!t.success)throw Error(t.message||"Failed to add room type");(0,o.Am)({title:"Success",description:"Room type added successfully."}),e.push("/my-hotels/".concat(s,"/rooms"))}catch(e){console.error("Error adding room type:",e),(0,o.Am)({variant:"destructive",title:"Error",description:e instanceof Error?e.message:"Could not add room type."})}finally{_(!1)}};return(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-3xl mx-auto",children:[(0,t.jsx)("nav",{className:"mb-6 text-sm text-gray-500","aria-label":"Breadcrumb",children:(0,t.jsxs)("ol",{className:"list-none p-0 inline-flex space-x-2",children:[(0,t.jsx)("li",{className:"flex items-center",children:(0,t.jsx)(u.default,{href:"/dashboard",className:"hover:text-indigo-600 hover:underline",children:"Dashboard"})}),(0,t.jsx)("li",{children:(0,t.jsx)("span",{className:"text-gray-400",children:"/"})}),(0,t.jsx)("li",{className:"flex items-center",children:(0,t.jsx)(u.default,{href:"/my-hotels",className:"hover:text-indigo-600 hover:underline",children:"Hotels"})}),(0,t.jsx)("li",{children:(0,t.jsx)("span",{className:"text-gray-400",children:"/"})}),(0,t.jsx)("li",{className:"flex items-center",children:(0,t.jsx)(u.default,{href:"/my-hotels/".concat(s,"/edit"),className:"hover:text-indigo-600 hover:underline truncate max-w-[150px]",children:M})}),(0,t.jsx)("li",{children:(0,t.jsx)("span",{className:"text-gray-400",children:"/"})}),(0,t.jsx)("li",{className:"flex items-center",children:(0,t.jsx)(u.default,{href:"/my-hotels/".concat(s,"/rooms"),className:"hover:text-indigo-600 hover:underline",children:"Rooms"})}),(0,t.jsx)("li",{children:(0,t.jsx)("span",{className:"text-gray-400",children:"/"})}),(0,t.jsx)("li",{className:"flex items-center text-gray-700 font-medium",children:"Add New Room Type"})]})}),(0,t.jsxs)("h2",{className:"text-2xl font-semibold text-gray-800 mb-6 flex items-center",children:[(0,t.jsx)(c.Z,{size:24,className:"mr-3 text-indigo-600"})," Add New Room Type for ",M]}),(0,t.jsxs)("form",{onSubmit:B,className:"space-y-6",children:[(0,t.jsxs)("fieldset",{className:"border border-gray-200 p-6 rounded-lg shadow-sm",children:[(0,t.jsx)("legend",{className:"text-lg font-semibold text-gray-700 px-2",children:"Room Details"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsxs)("label",{htmlFor:"room_type_name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Room Type Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",id:"room_type_name",name:"room_type_name",value:v.room_type_name,onChange:P,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., Deluxe Double, Standard Single"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"base_price",className:"block text-sm font-medium text-gray-700 mb-1",children:["Base Price/Night (INR) ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"number",id:"base_price",name:"base_price",value:v.base_price,onChange:P,required:!0,min:"0",step:"0.01",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., 2500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"max_guests",className:"block text-sm font-medium text-gray-700 mb-1",children:["Max Guests ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"number",id:"max_guests",name:"max_guests",value:v.max_guests,onChange:P,required:!0,min:"1",step:"1",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., 2"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"quantity_available",className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity Available"}),(0,t.jsx)("input",{type:"number",id:"quantity_available",name:"quantity_available",value:v.quantity_available,onChange:P,min:"0",step:"1",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., 10"}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Number of rooms of this type."})]})]})]}),(0,t.jsxs)("fieldset",{className:"border border-gray-200 p-6 rounded-lg shadow-sm",children:[(0,t.jsx)("legend",{className:"text-lg font-semibold text-gray-700 px-2",children:"Amenities & Images"}),(0,t.jsxs)("div",{className:"space-y-6 mt-4",children:[(0,t.jsx)(x.c,{label:"Room Amenities",name:"amenities",options:g,selectedValues:v.amenities,onChange:(e,s)=>{j(a=>({...a,[e]:s}))},gridCols:3,helperText:"Select amenities available in this room type."}),(0,t.jsx)(h.w,{label:"Room Images",onImagesUploaded:e=>{j(s=>({...s,images:e}))},existingImages:v.images,parentId:s,type:"room",maxImages:6,helperText:"Upload photos specific to this room type (beds, bathroom, views)."})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,t.jsx)(u.default,{href:"/my-hotels/".concat(s,"/rooms"),className:"bg-gray-200 text-gray-800 px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-300 transition duration-150 ease-in-out",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:!!(N||Z),className:"inline-flex items-center bg-indigo-600 text-white px-6 py-2 rounded-md text-sm font-medium hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition duration-150 ease-in-out",children:N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Z,{size:16,className:"animate-spin mr-2"})," Adding Room..."]}):"Add Room Type"})]})]})]})}function j(){return(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)(f,{text:"Loading Add Room Page..."}),children:(0,t.jsx)(v,{})})}}},function(e){e.O(0,[2972,8503,2971,2117,1744],function(){return e(e.s=124)}),_N_E=e.O()}]);