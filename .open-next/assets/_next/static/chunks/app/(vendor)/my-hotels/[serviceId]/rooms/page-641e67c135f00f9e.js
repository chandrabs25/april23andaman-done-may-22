(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8318],{8834:function(e,t,s){Promise.resolve().then(s.bind(s,1485))},2660:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7920:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("BedDouble",[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]])},1128:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]])},5252:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},9637:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},4630:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},285:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},8930:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},5805:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},1485:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return _},dynamic:function(){return w}});var r=s(7437),a=s(2265),n=s(7648),i=s(9376),l=s(4603),o=s(9889),c=s(5863),d=s(3639),m=s(4794),u=s(8728),x=s(9637),h=s(7920),f=s(5252),y=s(5805),p=s(1128);let g=(0,s(9763).Z)("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);var v=s(4630),j=s(8930),N=s(2660),b=s(285),k=s(3340);let w="force-dynamic",Z=e=>{let{text:t="Loading..."}=e;return(0,r.jsxs)("div",{className:"flex justify-center items-center py-10",children:[(0,r.jsx)(c.Z,{className:"h-6 w-6 animate-spin text-blue-600 mr-2"}),(0,r.jsx)("span",{className:"text-gray-700 text-base",children:t})," "]})},M=e=>{let{title:t,children:s,className:a="",icon:n}=e;return(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 ease-in-out transform hover:-translate-y-1 animate-fadeIn ".concat(a),children:[t&&(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[n&&(0,r.jsx)(n,{className:"h-6 w-6 text-blue-600 mr-3"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:t})]}),s]})},E=()=>(0,r.jsxs)(M,{title:"Verification Pending",icon:d.Z,className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700",children:[" ",(0,r.jsx)("p",{className:"text-sm",children:"Your account must be verified before you can manage rooms. Please check your profile status or contact support."})," ",(0,r.jsx)(n.default,{href:"/dashboard?tab=profile",className:"text-sm text-blue-700 hover:text-blue-800 hover:underline mt-3 inline-block font-medium",children:"Go to Profile"})," "]}),T=()=>(0,r.jsxs)(M,{title:"Incorrect Vendor Type",icon:m.Z,className:"bg-red-50 border-l-4 border-red-400 text-red-700",children:[" ",(0,r.jsx)("p",{className:"text-sm",children:"This page is for managing Hotel Rooms. Non-hotel vendors should use the Service Management section."})," ",(0,r.jsxs)("div",{className:"mt-4 flex flex-col sm:flex-row gap-3 sm:gap-4",children:[" ",(0,r.jsxs)(n.default,{href:"/my-services",className:"inline-flex items-center text-sm text-blue-700 hover:text-blue-800 hover:underline font-medium",children:[" ",(0,r.jsx)(u.Z,{size:14,className:"mr-1.5"})," Go to Service Management"]}),(0,r.jsxs)(n.default,{href:"/dashboard",className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-800 hover:underline font-medium",children:[" ",(0,r.jsx)(x.Z,{size:14,className:"mr-1.5"})," Return to Dashboard"]})]})]}),S=e=>{var t;let{room:s,hotelServiceId:a,onDelete:i,isDeleting:l}=e,o=Array.isArray(s.images)?s.images:[],d=o.length>0?o[0]:null,m=[];try{if(s.amenities){let e=JSON.parse(s.amenities);Array.isArray(e)&&(m=e.map(e=>"object"==typeof e&&e.name?e.name:String(e)))}}catch(e){console.warn("Could not parse room amenities string: ",s.amenities)}return(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-2xl transition-shadow duration-300 ease-in-out flex flex-col ".concat("animate-fadeInUp"),children:[" ",d?(0,r.jsx)("img",{src:d,alt:s.room_type_name,className:"w-full h-48 object-cover"}):(0,r.jsx)("div",{className:"w-full h-48 bg-gray-200 flex items-center justify-center text-gray-400",children:(0,r.jsx)(h.Z,{size:48})}),(0,r.jsxs)("div",{className:"p-5 flex flex-col flex-grow",children:[" ",(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-1 truncate",title:s.room_type_name,children:s.room_type_name})," ",(0,r.jsxs)("div",{className:"text-sm text-gray-600 space-y-1 mb-3 flex-grow",children:[" ",(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(f.Z,{size:14,className:"mr-2 text-gray-500"})," ",(0,r.jsxs)("span",{children:[Number(s.base_price).toLocaleString("en-IN",{style:"currency",currency:"INR"})," / night"]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(y.Z,{size:14,className:"mr-2 text-gray-500"})," ",(0,r.jsxs)("span",{children:["Max ",s.max_guests," guests"]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(p.Z,{size:14,className:"mr-2 text-gray-500"})," ",(0,r.jsxs)("span",{children:[null!==(t=s.quantity_available)&&void 0!==t?t:"N/A"," available"]})]}),m.length>0&&(0,r.jsxs)("div",{className:"flex items-start pt-1",children:[(0,r.jsx)(g,{size:14,className:"mr-2 text-gray-500 mt-0.5 flex-shrink-0"})," ",(0,r.jsxs)("span",{className:"text-xs text-gray-500 truncate",title:m.join(", "),children:["Amenities: ",m.slice(0,3).join(", ")," ",m.length>3?"...":""]})," "]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-2 border-t border-gray-200 pt-4 mt-auto",children:[" ",(0,r.jsxs)(n.default,{href:"/my-hotels/".concat(a,"/rooms/").concat(s.id,"/edit"),className:"text-indigo-600 hover:text-indigo-800 p-1.5 rounded-md hover:bg-indigo-50 transition-colors",title:"Edit Room Type",children:[" ",(0,r.jsx)(v.Z,{size:18})]}),(0,r.jsx)("button",{onClick:()=>i(s.id),disabled:l===s.id,className:"text-red-500 hover:text-red-700 p-1.5 rounded-md hover:bg-red-50 transition-colors disabled:opacity-60 disabled:cursor-wait",title:"Delete Room Type",children:l===s.id?(0,r.jsx)(c.Z,{size:18,className:"animate-spin"}):(0,r.jsx)(j.Z,{size:18})})]})]})]})};function A(){let e=(0,i.useRouter)(),t=(0,i.useParams)().serviceId,{user:s,isLoading:c,isAuthenticated:m}=(0,l.a)(),[u,x]=(0,a.useState)([]),[f,y]=(0,a.useState)(null),p=(null==s?void 0:s.id)?"/api/vendors/profile?userId=".concat(s.id):null,{data:g,error:v,status:j}=(0,o.i)(p),w=(null==g?void 0:g.verified)===1,A=(null==g?void 0:g.type)==="hotel",_="success"===j&&g&&w&&A&&!!t,I=_?"/api/vendor/my-hotels/".concat(t):null,{data:R,error:z,status:D}=(0,o.i)(I),H=(null==R?void 0:R.name)||"Hotel (ID: ".concat(t,")"),O="success"===D&&!!R,L=O?"/api/vendor/my-hotels/".concat(t,"/rooms"):null,{data:P,error:q,status:C}=(0,o.i)(L);if((0,a.useEffect)(()=>{"success"===C&&P&&x(P)},[C,P]),(0,a.useEffect)(()=>{c||m&&(null==s?void 0:s.role_id)===3||e.replace("/login?reason=unauthorized_vendor")},[c,m,s,e]),c||"loading"===j||_&&"loading"===D||O&&"loading"===C)return(0,r.jsx)(Z,{text:"Loading Room Types..."});if("error"===j)return(0,r.jsxs)("div",{className:"min-h-[calc(100vh-4rem)] flex flex-col items-center justify-center text-center px-4 py-10 bg-gray-50",children:[" ",(0,r.jsxs)(M,{title:"Error",icon:d.Z,className:"max-w-md w-full",children:[" ",(0,r.jsxs)("p",{className:"text-red-600 text-sm",children:["Error loading vendor profile: ",(null==v?void 0:v.message)||"Unknown error"]})," "]})]});if("success"===j&&!g)return(0,r.jsxs)("div",{className:"min-h-[calc(100vh-4rem)] flex flex-col items-center justify-center text-center px-4 py-10 bg-gray-50",children:[" ",(0,r.jsxs)(M,{title:"Profile Not Found",icon:d.Z,className:"max-w-md w-full bg-orange-50 border-l-4 border-orange-400 text-orange-700",children:[" ",(0,r.jsx)("p",{className:"text-sm",children:"Vendor profile not found. Cannot load rooms."})," "]})]});if(!w&&"success"===j)return(0,r.jsxs)("div",{className:"min-h-[calc(100vh-4rem)] flex flex-col items-center justify-center px-4 py-10 bg-gray-50",children:[" ",(0,r.jsx)(E,{})]});if(!A&&"success"===j)return(0,r.jsxs)("div",{className:"min-h-[calc(100vh-4rem)] flex flex-col items-center justify-center px-4 py-10 bg-gray-50",children:[" ",(0,r.jsx)(T,{})]});if("error"===D||"success"===D&&!R)return(0,r.jsxs)("div",{className:"min-h-[calc(100vh-4rem)] flex flex-col items-center justify-center text-center px-4 py-10 bg-gray-50",children:[" ",(0,r.jsxs)(M,{title:"Error Loading Hotel",icon:d.Z,className:"max-w-md w-full",children:[" ",(0,r.jsxs)("p",{className:"text-red-600 text-sm",children:["Error loading hotel details: ",(null==z?void 0:z.message)||"Hotel not found or permission denied."]})," ",(0,r.jsx)(n.default,{href:"/my-hotels",className:"text-sm text-blue-700 hover:text-blue-800 hover:underline mt-3 inline-block font-medium",children:"Return to Hotel List"})," "]})]});if("error"===C&&O)return(0,r.jsxs)("div",{className:"min-h-[calc(100vh-4rem)] flex flex-col items-center justify-center text-center px-4 py-10 bg-gray-50",children:[" ",(0,r.jsxs)(M,{title:"Error Loading Rooms",icon:d.Z,className:"max-w-md w-full",children:[" ",(0,r.jsxs)("p",{className:"text-red-600 text-sm",children:["Error loading room types: ",(null==q?void 0:q.message)||"Unknown error"]})," "]})]});let V=async e=>{if(confirm("Are you sure you want to delete this room type? This action cannot be undone.")){y(e);try{let s=await fetch("/api/vendor/my-hotels/".concat(t,"/rooms/").concat(e),{method:"DELETE"}),r=await s.json();if(!s.ok||!r.success)throw Error(r.message||"Failed to delete room type");(0,k.Am)({title:"Success",description:"Room type deleted successfully."}),x(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting room type:",e),(0,k.Am)({variant:"destructive",title:"Error",description:e instanceof Error?e.message:"Could not delete room type."})}finally{y(null)}}};return(0,r.jsxs)("div",{className:"space-y-6 py-6",children:[" ",(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[" ",(0,r.jsxs)("div",{children:[(0,r.jsxs)(n.default,{href:"/my-hotels",className:"inline-flex items-center bg-blue-600 text-white px-2 py-0.5  text-sm font-medium hover:bg-blue-700 transition-colors duration-150 shadow-md animate-fadeIn",style:{borderRadius:"0.5rem"},children:[(0,r.jsx)(N.Z,{size:14,className:"mr-2"})," Back to Hotel"]}),(0,r.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 animate-fadeInUp",children:["Manage Rooms: ",H]})," "]}),w&&A&&(0,r.jsxs)(n.default,{href:"/my-hotels/".concat(t,"/rooms/add"),className:"inline-flex items-center bg-blue-600 text-white px-5 py-2.5  text-sm font-medium hover:bg-blue-700 transition-colors duration-150 shadow-md animate-fadeIn",style:{borderRadius:"0.5rem"},children:[(0,r.jsx)(b.Z,{size:18,className:"mr-2"})," Add New Room Type"]})]}),w&&A&&"loading"!==C&&(0===u.length&&"success"===C?(0,r.jsxs)(M,{className:"text-center",children:[" ",(0,r.jsxs)("div",{className:"py-8",children:[" ",(0,r.jsx)(h.Z,{size:48,className:"mx-auto text-gray-400 mb-4"})," ",(0,r.jsxs)("p",{className:"text-gray-500 text-lg font-medium",children:["No room types found for ",H,"."]})," ",(0,r.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:'Click "Add New Room Type" to get started.'})," "]})]}):(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[" ",u.map(e=>(0,r.jsx)(S,{room:e,hotelServiceId:t,onDelete:V,isDeleting:f},e.id))]})),w&&A&&"loading"===C&&(0,r.jsx)(Z,{text:"Loading room types..."})]})}function _(){return(0,r.jsxs)("div",{className:"min-h-[calc(100vh-4rem)] bg-gray-50 px-4 sm:px-6 lg:px-8 py-8",children:[" ",(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)(Z,{text:"Loading Rooms Page..."}),children:(0,r.jsx)(A,{})})]})}},3340:function(e,t,s){"use strict";s.d(t,{Am:function(){return d}}),s(2265);let r=0,a=new Map,n=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],o={toasts:[]};function c(e){o=i(o,e),l.forEach(e=>{e(o)})}function d(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}}},function(e){e.O(0,[2972,4916,2971,2117,1744],function(){return e(e.s=8834)}),_N_E=e.O()}]);