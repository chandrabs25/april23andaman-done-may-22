(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2596],{4783:function(e,i,t){Promise.resolve().then(t.bind(t,6884))},3245:function(e,i,t){"use strict";t.d(i,{Z:function(){return s}});let s=(0,t(9763).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},166:function(e,i,t){"use strict";t.d(i,{default:function(){return a.a}});var s=t(5775),a=t.n(s)},5775:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"default",{enumerable:!0,get:function(){return r}});let s=t(7043);t(7437),t(2265);let a=s._(t(5602));function r(e,i){var t;let s={loading:e=>{let{error:i,isLoading:t,pastDelay:s}=e;return null}};"function"==typeof e&&(s.loader=e);let r={...s,...i};return(0,a.default)({...r,modules:null==(t=r.loadableGenerated)?void 0:t.modules})}("function"==typeof i.default||"object"==typeof i.default&&null!==i.default)&&void 0===i.default.__esModule&&(Object.defineProperty(i.default,"__esModule",{value:!0}),Object.assign(i.default,i),e.exports=i.default)},1523:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let s=t(8993);function a(e){let{reason:i,children:t}=e;if("undefined"==typeof window)throw new s.BailoutToCSRError(i);return t}},5602:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"default",{enumerable:!0,get:function(){return d}});let s=t(7437),a=t(2265),r=t(1523),l=t(49);function n(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},d=function(e){let i={...o,...e},t=(0,a.lazy)(()=>i.loader().then(n)),d=i.loading;function c(e){let n=d?(0,s.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,o=i.ssr?(0,s.jsxs)(s.Fragment,{children:["undefined"==typeof window?(0,s.jsx)(l.PreloadCss,{moduleIds:i.modules}):null,(0,s.jsx)(t,{...e})]}):(0,s.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(t,{...e})});return(0,s.jsx)(a.Suspense,{fallback:n,children:o})}return c.displayName="LoadableComponent",c}},49:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"PreloadCss",{enumerable:!0,get:function(){return r}});let s=t(7437),a=t(544);function r(e){let{moduleIds:i}=e;if("undefined"!=typeof window)return null;let t=(0,a.getExpectedRequestStore)("next/dynamic css"),r=[];if(t.reactLoadableManifest&&i){let e=t.reactLoadableManifest;for(let t of i){if(!e[t])continue;let i=e[t].files.filter(e=>e.endsWith(".css"));r.push(...i)}}return 0===r.length?null:(0,s.jsx)(s.Fragment,{children:r.map(e=>(0,s.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:t.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},6884:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return N},dynamic:function(){return x}});var s=t(7437),a=t(2265),r=t(9376),l=t(4603),n=t(9889),o=t(3340),d=t(5863),c=t(3245),m=t(7648),u=t(3500),p=t(1079),g=t(166);t(5046);let x="force-dynamic",h=(0,g.default)(()=>Promise.all([t.e(5716),t.e(4212),t.e(1062)]).then(t.bind(t,1062)),{ssr:!1,loading:()=>(0,s.jsx)("p",{children:"Loading map..."})}),b=[{label:"Wi-Fi",value:"wifi"},{label:"Parking",value:"parking"},{label:"Restroom",value:"restroom"},{label:"First Aid",value:"first_aid"},{label:"Refreshments Available",value:"refreshments"}],v=[{label:"Helmet",value:"helmet"},{label:"Life Jacket",value:"life_jacket"},{label:"Snorkel Gear",value:"snorkel_gear"},{label:"Scuba Gear",value:"scuba_gear"},{label:"Kayak/Paddle",value:"kayak_paddle"},{label:"Hiking Boots",value:"hiking_boots"},{label:"Safety Harness",value:"safety_harness"}],y=[{label:"Monday",value:"Mon"},{label:"Tuesday",value:"Tue"},{label:"Wednesday",value:"Wed"},{label:"Thursday",value:"Thu"},{label:"Friday",value:"Fri"},{label:"Saturday",value:"Sat"},{label:"Sunday",value:"Sun"}],f=e=>{let{text:i="Loading..."}=e;return(0,s.jsxs)("div",{className:"flex justify-center items-center py-10",children:[(0,s.jsx)(d.Z,{className:"h-6 w-6 animate-spin text-blue-600 mr-2"}),(0,s.jsx)("span",{children:i})]})},_=()=>(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 border border-red-300 bg-red-50 rounded-md shadow-sm text-red-700",children:[(0,s.jsx)(c.Z,{className:"h-8 w-8 mb-2"}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-1",children:"Incorrect Vendor Type"}),(0,s.jsx)("p",{className:"text-sm text-center",children:"This form is for adding Rentals or Activities. Hotel vendors should manage rooms via the Hotels section."}),(0,s.jsx)(m.default,{href:"/my-hotels",className:"mt-3 text-sm text-indigo-600 hover:underline",children:"Go to Hotel Management"})]});function j(){let e=(0,r.useRouter)(),{user:i,isLoading:t,isAuthenticated:c}=(0,l.a)(),[g,x]=(0,a.useState)({name:"",description:"",type:"",island_id:"",price:"",availability_days:[],availability_notes:"",images:[],cancellation_policy:"",is_active:!0,general_amenities:[],rental_unit:"",quantity_available:"",deposit_required:!1,deposit_amount:"",age_license_requirement:!1,age_license_details:"",duration:"",duration_unit:"",group_size_min:"",group_size_max:"",difficulty_level:"",equipment_provided:[],safety_requirements:"",guide_required:!1,vehicle_type:"",capacity_passengers:"",route_details:"",price_per_km:"",price_per_trip:"",driver_included:!0,street_address:"",geo_lat:"",geo_lng:""}),[j,N]=(0,a.useState)(!1),[w,k]=(0,a.useState)(!1),[S,q]=(0,a.useState)(null),[F,C]=(0,a.useState)(!1),A=g.type.split("/")[0],I=(null==i?void 0:i.id)?"/api/vendors/profile?userId=".concat(i.id):null,{data:P,error:T,status:R}=(0,n.i)(I);null==P||P.verified;let M=(null==P?void 0:P.type)==="hotel",{data:D=[],error:E,status:z}=(0,n.i)("/api/islands");(0,a.useEffect)(()=>{t||c&&(null==i?void 0:i.role_id)===3||e.replace("/auth/signin?reason=unauthorized_vendor")},[t,c,i,e]);let O=t||"loading"===R||"loading"===z;if(O)return(0,s.jsx)(f,{text:"Loading Add Service Form..."});if("error"===R||"success"===R&&!P)return(0,s.jsx)("div",{className:"text-red-600",children:"Error loading vendor profile or profile not found."});if(M)return(0,s.jsx)(_,{});let L=e=>{let{name:i,value:t,type:s}=e.target;if("checkbox"===s){let{checked:t}=e.target;x(e=>({...e,[i]:t}))}else x(e=>({...e,[i]:t}))},U=(e,i)=>{x(t=>({...t,[e]:i}))},V=async i=>{if(!S){(0,o.Am)({variant:"destructive",title:"Error",description:"Service ID not available for image upload."});return}if(0===i.length){(0,o.Am)({title:"Info",description:"No new images to upload. Service created without new images."}),e.push("/my-services");return}k(!0),console.log("Attempting to associate images with service ID: ".concat(S),i);try{let t=await fetch("/api/vendor/my-services/".concat(S),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({images:JSON.stringify(i)})}),s=await t.json();if(t.ok&&s.success)(0,o.Am)({title:"Success",description:"Images associated with the service successfully."}),x(e=>({...e,images:i})),e.push("/my-services");else throw Error(s.message||"Failed to associate images with the service.")}catch(e){console.error("Error associating images:",e),(0,o.Am)({variant:"destructive",title:"Image Association Error",description:e.message||"An unexpected error occurred while associating images."})}finally{k(!1)}},B=async i=>{if(i.preventDefault(),S){(0,o.Am)({title:"Info",description:"Service details already submitted. Please upload images or navigate away."}),0!==g.images.length||w||e.push("/my-services");return}if(N(!0),!g.type||!g.island_id||!g.name.trim()||isNaN(parseFloat(g.price))||0>=parseFloat(g.price)){(0,o.Am)({variant:"destructive",title:"Validation Error",description:"Please fill all required fields (*) with valid data."}),N(!1);return}if("rental"===A&&(!g.rental_unit||isNaN(parseInt(g.quantity_available))||0>=parseInt(g.quantity_available))){(0,o.Am)({variant:"destructive",title:"Validation Error",description:"Please provide valid rental unit and quantity for rentals."}),N(!1);return}if("activity"===A&&(!g.duration_unit||isNaN(parseInt(g.duration))||0>=parseInt(g.duration))){(0,o.Am)({variant:"destructive",title:"Validation Error",description:"Please provide valid duration and unit for activities."}),N(!1);return}if("transport"===A&&(!g.vehicle_type||!g.capacity_passengers)){(0,o.Am)({variant:"destructive",title:"Validation Error",description:"Please provide vehicle type and capacity for transport services."}),N(!1);return}let t={name:g.name,description:g.description,type:g.type,island_id:parseInt(g.island_id,10)||null,price:parseFloat(g.price)||0,cancellation_policy:g.cancellation_policy,is_active:g.is_active,availability_days:g.availability_days,availability_notes:g.availability_notes,general_amenities:g.general_amenities,rental_unit:"rental"===A?g.rental_unit:void 0,quantity_available:"rental"===A&&g.quantity_available?parseInt(g.quantity_available,10)||null:void 0,deposit_required:"rental"===A?g.deposit_required:void 0,deposit_amount:"rental"===A&&g.deposit_amount?parseFloat(g.deposit_amount)||null:void 0,age_license_requirement:"rental"===A?g.age_license_requirement:void 0,age_license_details:"rental"===A?g.age_license_details:void 0,duration:"activity"===A&&g.duration?parseInt(g.duration,10)||null:void 0,duration_unit:"activity"===A?g.duration_unit:void 0,group_size_min:"activity"===A&&g.group_size_min?parseInt(g.group_size_min,10)||null:void 0,group_size_max:"activity"===A&&g.group_size_max?parseInt(g.group_size_max,10)||null:void 0,difficulty_level:"activity"===A?g.difficulty_level:void 0,equipment_provided:"activity"===A?g.equipment_provided:void 0,safety_requirements:"activity"===A?g.safety_requirements:void 0,guide_required:"activity"===A?g.guide_required:void 0,vehicle_type:"transport"===A?g.vehicle_type:void 0,capacity_passengers:"transport"===A&&g.capacity_passengers?parseInt(g.capacity_passengers,10)||null:void 0,route_details:"transport"===A?g.route_details:void 0,price_per_km:"transport"===A&&g.price_per_km?parseFloat(g.price_per_km)||null:void 0,price_per_trip:"transport"===A&&g.price_per_trip?parseFloat(g.price_per_trip)||null:void 0,driver_included:"transport"===A?g.driver_included:void 0,service_provider_id:null==P?void 0:P.id,street_address:g.street_address,geo_lat:g.geo_lat?parseFloat(g.geo_lat):null,geo_lng:g.geo_lng?parseFloat(g.geo_lng):null};t.availability=JSON.stringify({days:g.availability_days,notes:g.availability_notes}),t.general_amenities=g.general_amenities,"activity"===A&&g.equipment_provided&&(t.equipment_provided=g.equipment_provided),delete t.availability_days,delete t.availability_notes,Object.keys(t).forEach(e=>void 0===t[e]&&delete t[e]);try{var s;let e=await fetch("/api/vendor/my-services",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),i=await e.json();if(e.ok&&i.success&&(null===(s=i.data)||void 0===s?void 0:s.id))(0,o.Am)({title:"Step 1 Complete",description:"Service details saved. Please upload images."}),q(i.data.id.toString());else throw Error(i.message||"Failed to add service details.")}catch(e){console.error("Add Service Details Error:",e),(0,o.Am)({variant:"destructive",title:"Error Saving Details",description:e.message||"An unexpected error occurred."})}finally{N(!1)}};return(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-4xl mx-auto",children:[(0,s.jsx)("nav",{className:"mb-6 text-sm text-gray-500","aria-label":"Breadcrumb",children:(0,s.jsxs)("ol",{className:"list-none p-0 inline-flex space-x-2",children:[(0,s.jsx)("li",{className:"flex items-center",children:(0,s.jsx)(m.default,{href:"/dashboard",className:"hover:text-indigo-600 hover:underline",children:"Dashboard"})}),(0,s.jsx)("li",{children:(0,s.jsx)("span",{className:"text-gray-400",children:"/"})}),(0,s.jsx)("li",{className:"flex items-center",children:(0,s.jsx)(m.default,{href:"/my-services",className:"hover:text-indigo-600 hover:underline",children:"Services"})}),(0,s.jsx)("li",{children:(0,s.jsx)("span",{className:"text-gray-400",children:"/"})}),(0,s.jsx)("li",{className:"flex items-center text-gray-700 font-medium",children:"Add New Service"})]})}),(0,s.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",children:"Add New Service"}),(0,s.jsxs)("form",{onSubmit:B,className:"space-y-6",children:[(0,s.jsxs)("fieldset",{className:"border border-gray-200 p-6 rounded-lg shadow-sm",children:[(0,s.jsx)("legend",{className:"text-lg font-semibold text-gray-700 px-2",children:"Basic Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-1",children:["Service Type ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{id:"type",name:"type",value:g.type,onChange:L,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white",children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"-- Select Type --"}),(0,s.jsxs)("optgroup",{label:"Transport",children:[(0,s.jsx)("option",{value:"transport/car",children:"Car Transport"}),(0,s.jsx)("option",{value:"transport/van",children:"Van Transport"}),(0,s.jsx)("option",{value:"transport/bus",children:"Bus Transport"}),(0,s.jsx)("option",{value:"transport/ferry",children:"Ferry Transport"}),(0,s.jsx)("option",{value:"transport/boat",children:"Boat Transport"})]}),(0,s.jsxs)("optgroup",{label:"Rentals",children:[(0,s.jsx)("option",{value:"rental/car",children:"Car Rental"}),(0,s.jsx)("option",{value:"rental/bike",children:"Bike/Scooter Rental"}),(0,s.jsx)("option",{value:"rental/boat",children:"Boat Rental"}),(0,s.jsx)("option",{value:"rental/equipment",children:"Equipment Rental (Surfboard, etc.)"})]}),(0,s.jsxs)("optgroup",{label:"Activities",children:[(0,s.jsx)("option",{value:"activity/tour",children:"Tour (Guided)"}),(0,s.jsx)("option",{value:"activity/watersport",children:"Watersport (Lesson/Rental)"}),(0,s.jsx)("option",{value:"activity/hiking",children:"Hiking/Trekking"}),(0,s.jsx)("option",{value:"activity/cultural",children:"Cultural Experience"}),(0,s.jsx)("option",{value:"activity/diving",children:"Diving/Snorkeling"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"island_id",className:"block text-sm font-medium text-gray-700 mb-1",children:["Island ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{id:"island_id",name:"island_id",value:g.island_id,onChange:L,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white",children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"-- Select Island --"}),null==D?void 0:D.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]}),"error"===z&&(0,s.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Error loading islands."})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsxs)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Service Name ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"name",name:"name",value:g.name,onChange:L,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., Guided Island Tour, Scooter Rental"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,s.jsx)("textarea",{id:"description",name:"description",value:g.description,onChange:L,rows:3,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Provide details about the service..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1",children:["Price (INR) ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"number",id:"price",name:"price",value:g.price,onChange:L,required:!0,min:"0",step:"0.01",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., 1500"}),(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Base price. Specify unit (per hour/day) in relevant section below."})]}),(0,s.jsxs)("div",{className:"flex items-center pt-6",children:[(0,s.jsx)("input",{type:"checkbox",id:"is_active",name:"is_active",checked:g.is_active,onChange:L,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 cursor-pointer"}),(0,s.jsx)("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900 cursor-pointer",children:"Service is Active"})]})]})]}),(0,s.jsxs)("fieldset",{className:"border border-gray-200 p-6 rounded-lg shadow-sm",children:[(0,s.jsx)("legend",{className:"text-lg font-semibold text-gray-700 px-2",children:"Availability & Amenities"}),(0,s.jsxs)("div",{className:"space-y-6 mt-4",children:[(0,s.jsx)(u.c,{label:"Available Days",name:"availability_days",options:y,selectedValues:g.availability_days,onChange:U,gridCols:4,helperText:"Select the days this service is typically available."}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"availability_notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Availability Notes"}),(0,s.jsx)("input",{type:"text",id:"availability_notes",name:"availability_notes",value:g.availability_notes,onChange:L,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., 9 AM - 5 PM, Closed on public holidays"}),(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Specify times, seasonal availability, or other notes."})]}),(0,s.jsx)(u.c,{label:"General Amenities",name:"general_amenities",options:b,selectedValues:g.general_amenities,onChange:U,gridCols:3,helperText:"Select amenities available at the location or included with the service."})]})]}),"transport"===A&&(0,s.jsxs)("fieldset",{className:"border border-indigo-200 p-6 rounded-lg shadow-sm bg-indigo-50",children:[(0,s.jsx)("legend",{className:"text-lg font-semibold text-indigo-700 px-2",children:"Transport Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"vehicle_type",className:"block text-sm font-medium text-gray-700 mb-1",children:["Vehicle Type ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{id:"vehicle_type",name:"vehicle_type",value:g.vehicle_type,onChange:L,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white",children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"-- Select Vehicle Type --"}),(0,s.jsx)("option",{value:"Sedan",children:"Sedan"}),(0,s.jsx)("option",{value:"SUV",children:"SUV"}),(0,s.jsx)("option",{value:"Minivan",children:"Minivan"}),(0,s.jsx)("option",{value:"Minibus",children:"Minibus"}),(0,s.jsx)("option",{value:"Bus",children:"Bus"}),(0,s.jsx)("option",{value:"Ferry",children:"Ferry"}),(0,s.jsx)("option",{value:"Speedboat",children:"Speedboat"}),(0,s.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"capacity_passengers",className:"block text-sm font-medium text-gray-700 mb-1",children:["Passenger Capacity ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"number",id:"capacity_passengers",name:"capacity_passengers",value:g.capacity_passengers,onChange:L,required:!0,min:"1",step:"1",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., 4"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"route_details",className:"block text-sm font-medium text-gray-700 mb-1",children:"Route Details"}),(0,s.jsx)("textarea",{id:"route_details",name:"route_details",value:g.route_details,onChange:L,rows:2,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., Port Blair to Havelock, Airport to Hotels"}),(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Describe the routes or areas where your service operates."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"price_per_km",className:"block text-sm font-medium text-gray-700 mb-1",children:"Price per KM (INR)"}),(0,s.jsx)("input",{type:"number",id:"price_per_km",name:"price_per_km",value:g.price_per_km,onChange:L,min:"0",step:"0.01",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., 15"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"price_per_trip",className:"block text-sm font-medium text-gray-700 mb-1",children:"Price per Trip (INR)"}),(0,s.jsx)("input",{type:"number",id:"price_per_trip",name:"price_per_trip",value:g.price_per_trip,onChange:L,min:"0",step:"0.01",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., 2500"})]}),(0,s.jsxs)("div",{className:"flex items-center pt-6",children:[(0,s.jsx)("input",{type:"checkbox",id:"driver_included",name:"driver_included",checked:g.driver_included,onChange:L,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 cursor-pointer"}),(0,s.jsx)("label",{htmlFor:"driver_included",className:"ml-2 block text-sm text-gray-900 cursor-pointer",children:"Driver Included"})]})]})]}),"rental"===A&&(0,s.jsxs)("fieldset",{className:"border border-blue-200 p-6 rounded-lg shadow-sm bg-blue-50",children:[(0,s.jsx)("legend",{className:"text-lg font-semibold text-blue-700 px-2",children:"Rental Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"rental_unit",className:"block text-sm font-medium text-gray-700 mb-1",children:["Rental Unit ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{id:"rental_unit",name:"rental_unit",value:g.rental_unit,onChange:L,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white",children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"-- Select Unit --"}),(0,s.jsx)("option",{value:"per hour",children:"Per Hour"}),(0,s.jsx)("option",{value:"per day",children:"Per Day"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"quantity_available",className:"block text-sm font-medium text-gray-700 mb-1",children:["Quantity Available ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"number",id:"quantity_available",name:"quantity_available",value:g.quantity_available,onChange:L,required:!0,min:"1",step:"1",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., 10"})]}),(0,s.jsxs)("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[(0,s.jsxs)("div",{className:"flex items-center pt-6",children:[(0,s.jsx)("input",{type:"checkbox",id:"deposit_required",name:"deposit_required",checked:g.deposit_required,onChange:L,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 cursor-pointer"}),(0,s.jsx)("label",{htmlFor:"deposit_required",className:"ml-2 block text-sm text-gray-900 cursor-pointer",children:"Deposit Required?"})]}),g.deposit_required&&(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"deposit_amount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Deposit Amount (INR)"}),(0,s.jsx)("input",{type:"number",id:"deposit_amount",name:"deposit_amount",value:g.deposit_amount,onChange:L,min:"0",step:"0.01",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., 500"})]})]}),(0,s.jsxs)("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[(0,s.jsxs)("div",{className:"flex items-center pt-6",children:[(0,s.jsx)("input",{type:"checkbox",id:"age_license_requirement",name:"age_license_requirement",checked:g.age_license_requirement,onChange:L,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 cursor-pointer"}),(0,s.jsx)("label",{htmlFor:"age_license_requirement",className:"ml-2 block text-sm text-gray-900 cursor-pointer",children:"Age/License Required?"})]}),g.age_license_requirement&&(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"age_license_details",className:"block text-sm font-medium text-gray-700 mb-1",children:"Requirement Details"}),(0,s.jsx)("input",{type:"text",id:"age_license_details",name:"age_license_details",value:g.age_license_details,onChange:L,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., Min age 18, Valid driving license"})]})]})]})]}),"activity"===A&&(0,s.jsxs)("fieldset",{className:"border border-green-200 p-6 rounded-lg shadow-sm bg-green-50",children:[(0,s.jsx)("legend",{className:"text-lg font-semibold text-green-700 px-2",children:"Activity Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[(0,s.jsxs)("div",{className:"flex items-end gap-2",children:[(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsxs)("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700 mb-1",children:["Duration ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"number",id:"duration",name:"duration",value:g.duration,onChange:L,required:!0,min:"1",step:"1",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., 3"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"duration_unit",className:"block text-sm font-medium text-gray-700 mb-1",children:["Unit ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{id:"duration_unit",name:"duration_unit",value:g.duration_unit,onChange:L,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white",children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"-- Unit --"}),(0,s.jsx)("option",{value:"hours",children:"Hours"}),(0,s.jsx)("option",{value:"days",children:"Days"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-end gap-2",children:[(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsx)("label",{htmlFor:"group_size_min",className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Group Size"}),(0,s.jsx)("input",{type:"number",id:"group_size_min",name:"group_size_min",value:g.group_size_min,onChange:L,min:"1",step:"1",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., 2"})]}),(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsx)("label",{htmlFor:"group_size_max",className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Group Size"}),(0,s.jsx)("input",{type:"number",id:"group_size_max",name:"group_size_max",value:g.group_size_max,onChange:L,min:"1",step:"1",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., 10"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"difficulty_level",className:"block text-sm font-medium text-gray-700 mb-1",children:"Difficulty Level"}),(0,s.jsxs)("select",{id:"difficulty_level",name:"difficulty_level",value:g.difficulty_level,onChange:L,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white",children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"-- Select Level --"}),(0,s.jsx)("option",{value:"easy",children:"Easy"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"hard",children:"Hard"})]})]}),(0,s.jsxs)("div",{className:"flex items-center pt-6",children:[(0,s.jsx)("input",{type:"checkbox",id:"guide_required",name:"guide_required",checked:g.guide_required,onChange:L,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 cursor-pointer"}),(0,s.jsx)("label",{htmlFor:"guide_required",className:"ml-2 block text-sm text-gray-900 cursor-pointer",children:"Guide Required/Included"})]}),(0,s.jsx)("div",{className:"md:col-span-2",children:(0,s.jsx)(u.c,{label:"Equipment Provided",name:"equipment_provided",options:v,selectedValues:g.equipment_provided,onChange:U,gridCols:3,helperText:"Select equipment included in the activity price."})}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"safety_requirements",className:"block text-sm font-medium text-gray-700 mb-1",children:"Safety Requirements"}),(0,s.jsx)("textarea",{id:"safety_requirements",name:"safety_requirements",value:g.safety_requirements,onChange:L,rows:2,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., Must be able to swim, Good physical condition required..."})]})]})]}),(0,s.jsxs)("fieldset",{className:"border border-gray-200 p-6 rounded-lg shadow-sm",children:[(0,s.jsx)("legend",{className:"text-lg font-semibold text-gray-700 px-2",children:"Location (Optional)"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"street_address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address / Meeting Point"}),(0,s.jsx)("input",{type:"text",id:"street_address",name:"street_address",value:g.street_address,onChange:L,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., Near Jetty, Shop No. 5"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"geo_lat",className:"block text-sm font-medium text-gray-700 mb-1",children:"Latitude (from map)"}),(0,s.jsx)("input",{type:"text",id:"geo_lat",name:"geo_lat",value:g.geo_lat,readOnly:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-100 sm:text-sm",placeholder:"Select on map"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"geo_lng",className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitude (from map)"}),(0,s.jsx)("input",{type:"text",id:"geo_lng",name:"geo_lng",value:g.geo_lng,readOnly:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-100 sm:text-sm",placeholder:"Select on map"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>C(!F),className:"mt-2 mb-2 text-sm text-indigo-600 hover:text-indigo-800 font-medium",children:F?"Hide Map":"Select Location on Map"}),F&&(0,s.jsxs)("div",{className:"mt-2 rounded-lg overflow-hidden shadow-sm border border-gray-200",children:[(0,s.jsx)(h,{onLocationChange:(e,i)=>{x(t=>({...t,street_address:t.street_address,geo_lat:e.toString(),geo_lng:i.toString()}))},initialPosition:g.geo_lat&&g.geo_lng?{lat:parseFloat(g.geo_lat),lng:parseFloat(g.geo_lng)}:void 0,mapHeight:"300px"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 p-2 bg-gray-50",children:"Click on the map or drag the marker. Use search for places."})]})]})]})]}),(0,s.jsxs)("fieldset",{className:"border border-gray-200 p-6 rounded-lg shadow-sm",children:[(0,s.jsx)("legend",{className:"text-lg font-semibold text-gray-700 px-2",children:"Images"}),(0,s.jsxs)("div",{className:"mt-4",children:[!S&&(0,s.jsxs)("div",{className:"p-4 bg-gray-100 rounded-md text-center text-gray-600",children:[(0,s.jsx)("p",{className:"font-medium",children:"Please save service details first to enable image uploads."}),(0,s.jsx)("p",{className:"text-sm",children:"After saving, this section will become active."})]}),S&&(0,s.jsx)(p.w,{label:"activity"===A?"Activity Images":"transport"===A?"Transport Vehicle Images":"Rental Equipment Images",onImagesUploaded:V,existingImages:g.images,parentId:S,type:"service",maxImages:8,helperText:"activity"===A?"Upload photos showcasing your activity (locations, equipment, guests enjoying the activity)":"transport"===A?"Upload photos of your transport vehicles in good condition":"Upload photos of the rental equipment in good condition"})]})]}),(0,s.jsxs)("fieldset",{className:"border border-gray-200 p-6 rounded-lg shadow-sm",children:[(0,s.jsx)("legend",{className:"text-lg font-semibold text-gray-700 px-2",children:"Policies"}),(0,s.jsx)("div",{className:"space-y-6 mt-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"cancellation_policy",className:"block text-sm font-medium text-gray-700 mb-1",children:"Cancellation Policy"}),(0,s.jsx)("textarea",{id:"cancellation_policy",name:"cancellation_policy",value:g.cancellation_policy,onChange:L,rows:2,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., Full refund if cancelled 24 hours prior..."})]})})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,s.jsx)(m.default,{href:"/my-services",className:"bg-gray-200 text-gray-800 px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-300 transition duration-150 ease-in-out",children:"Cancel"}),(0,s.jsx)("button",{type:S?"button":"submit",disabled:j||O||!!S&&w,onClick:S?i=>{i.preventDefault(),0!==g.images.length||w?w?(0,o.Am)({title:"Image Upload Pending",description:"Please wait for images to upload and associate."}):(0,o.Am)({title:"Image Upload Expected",description:"Please upload images, or wait for existing selections to process."}):((0,o.Am)({title:"Finalizing Service",description:"No images selected. Finalizing service creation."}),e.push("/my-services"))}:void 0,className:"inline-flex items-center bg-indigo-600 text-white px-6 py-2 rounded-md text-sm font-medium hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition duration-150 ease-in-out",children:j?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,{size:16,className:"animate-spin mr-2"})," Saving Details..."]}):S?w?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,{size:16,className:"animate-spin mr-2"})," Associating Images..."]}):g.images.length>0?"Images Selected (Auto-associates on upload)":"Finish & Save Service":"Save Details & Upload Images"})]})]})]})}function N(){return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)(f,{text:"Loading Add Service Page..."}),children:(0,s.jsx)(j,{})})}},5046:function(){}},function(e){e.O(0,[5641,2972,8503,2971,2117,1744],function(){return e(e.s=4783)}),_N_E=e.O()}]);