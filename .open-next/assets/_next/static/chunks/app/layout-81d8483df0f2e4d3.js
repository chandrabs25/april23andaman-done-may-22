(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{6501:function(e,t,o){Promise.resolve().then(o.t.bind(o,9974,23)),Promise.resolve().then(o.t.bind(o,2778,23)),Promise.resolve().then(o.bind(o,6887))},6887:function(e,t,o){"use strict";o.d(t,{Providers:function(){return c}});var s=o(7437);o(2265);var r=o(4603),n=o(5922),a=o(4438);let u=e=>{let{...t}=e,{theme:o="system"}=(0,n.F)();return(0,s.jsx)(a.x7,{theme:o,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};function c(e){let{children:t}=e;return(0,s.jsxs)(r.H,{children:[t," ",(0,s.jsx)(u,{position:"top-right",richColors:!0})," "]})}},4603:function(e,t,o){"use strict";o.d(t,{H:function(){return u},a:function(){return c}});var s=o(7437),r=o(2265),n=o(9376);let a=(0,r.createContext)(void 0),u=e=>{let{children:t}=e,[o,u]=(0,r.useState)(null),[c,i]=(0,r.useState)(!0),l=(0,n.useRouter)(),g=(0,r.useCallback)(async()=>{try{console.log("Checking auth state via /api/auth/me...");let e=await fetch("/api/auth/me",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"}),t=await e.json();e.ok&&t.success&&t.data?(console.log("Auth check successful, user found:",t.data),u(t.data)):(console.log("Auth check failed or no user session found."),u(null))}catch(e){console.error("Error checking auth state:",e),u(null)}finally{i(!1)}},[]);(0,r.useEffect)(()=>{i(!0),g()},[g]);let d=(0,r.useCallback)(async(e,t)=>{i(!0);try{console.log("Attempting login with:",e);let o=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t}),credentials:"include"}),s=await o.json();if(o.ok&&s.success&&s.data)return console.log("Login successful:",s.data),u(s.data),i(!1),{success:!0,user:s.data};return console.error("Login API failed:",s.message),u(null),i(!1),{success:!1,user:null}}catch(e){return console.error("Login fetch error:",e),u(null),i(!1),{success:!1,user:null}}},[]),h=(0,r.useCallback)(async(e,t,o)=>{i(!0);try{console.log("Attempting registration for:",t);let s=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:o})}),r=await s.json();if(s.ok&&r.success)return console.log("Registration successful",r.message),i(!1),{success:!0,message:r.message||"Registration successful!"};return console.error("Registration API failed:",r.message),i(!1),{success:!1,message:r.message||"Registration failed."}}catch(e){return console.error("Registration fetch error:",e),i(!1),{success:!1,message:"An unexpected error occurred."}}},[]),f=(0,r.useCallback)(async()=>{try{console.log("Logging out..."),await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(e){console.error("Logout API call failed:",e)}finally{u(null),console.log("Redirecting to signin page after logout."),l.push("/auth/signin")}},[l]);return(0,s.jsx)(a.Provider,{value:{user:o,isAuthenticated:!!o,isLoading:c,login:d,register:h,logout:f,checkAuthState:g},children:t})},c=()=>{let e=(0,r.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2778:function(){}},function(e){e.O(0,[1919,2461,5002,2971,2117,1744],function(){return e(e.s=6501)}),_N_E=e.O()}]);